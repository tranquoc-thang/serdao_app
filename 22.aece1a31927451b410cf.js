"use strict";(self.webpackChunkcom_skyfiresolution_tokunabi_admin=self.webpackChunkcom_skyfiresolution_tokunabi_admin||[]).push([[22],{2022:($e,j,m)=>{m.r(j),m.d(j,{CustomerModule:()=>Ve});var T=m(8583),$=m(9394),K=m(8295),W=m(9983),X=m(5939),z=m(6352),O=m(8122),U=m(1841),i=m(3679),_=m(4655),D=m(8239),A=m(2587),E=m(5758),k=m(5917),L=m(1289),x=m(7624),e=m(7716),N=m(2541),y=m(9075),b=m(2238),S=m(272),M=m(4003),q=m(9344),w=m(9790),v=m(9451),Z=m(3013),F=m(4080);let J=(()=>{class s extends A.H{constructor(t,o,n,r,a,l,d,g,h,C,f,p,u){super(o,n,r,a,l,d,g,h,C),this.customerService=t,this.formBuilder=f,this.ref=p,this.primeConfig=u}ngOnInit(){this.detailCompany=this.customerService.detailCompany,this._translateService.get("primeng").subscribe(t=>this.primeConfig.setTranslation(t)),this.detailCompany.companyFoundingDate&&(this.currentFoundingDate=this.detailCompany.companyFoundingDate,this.date=new Date(this.currentFoundingDate)),this.detailCompany.companyTypeOfBusiness&&(this.currentType=this.detailCompany.companyTypeOfBusiness),this.companyEditForm=this.formBuilder.group({txtEmail:[this.detailCompany.companyEmail,{validators:[i.kI.maxLength(150),i.kI.pattern(x.q.validators.patterns.email),i.kI.required],asyncValidators:[],updateOn:"change"}],txtCompanyName:[this.detailCompany.companyName,{validators:[i.kI.maxLength(150),i.kI.required],asyncValidators:[],updateOn:"change"}],txtFirstName:[this.detailCompany.companyOwnerFirstName,{validators:[i.kI.maxLength(50),i.kI.required],asyncValidators:[],updateOn:"change"}],txtKanjiFirstName:[this.detailCompany.companyOwnerKanaFirstName,{validators:[i.kI.maxLength(100),i.kI.pattern(x.q.validators.patterns.anphabetFullJapanese)],asyncValidators:[],updateOn:"change"}],txtPhoneNumber:[this.detailCompany.companyOwnerPhone,{validators:[i.kI.maxLength(30),i.kI.pattern(x.q.validators.patterns.onlyNumeric)],asyncValidators:[],updateOn:"change"}],txtPostalCode:[this.detailCompany.companyPostalCode,{validators:[],asyncValidators:[],updateOn:"change"}],txtAddress:[this.detailCompany.companyAddress,{validators:[i.kI.maxLength(1e3)],asyncValidators:[],updateOn:"change"}]})}ngOnDestroy(){console.log("destroyed")}getProvince(t){this.currentProvince=t}getSex(t){this.currentSex=t}getType(t){this.currentType=t}getDate(t){let o=new Date(Date.parse(t));this.currentFoundingDate=`${o.getFullYear()}/${o.getMonth()+1}/${o.getDate()}`}getCreateDate(t){this.createDate=t.value}get email(){return this.companyEditForm.get("email")}isDisable(){return this.companyEditForm.valid}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(N.v),e.Y36(_.gz),e.Y36(y.Dx),e.Y36(_.F0),e.Y36(b.uw),e.Y36(S.v),e.Y36(M.w),e.Y36(q._W),e.Y36(w.sK),e.Y36(v.xA),e.Y36(i.qu),e.Y36(v.E7),e.Y36(Z.b4))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-customer-dialog-detail-content"]],inputs:{data:"data"},features:[e.qOj],decls:48,vars:18,consts:[[3,"formGroup"],[1,"row"],[1,"col-md-12"],["for","email",1,"form-control-label"],["type","email","formControlName","txtEmail","tabindex","3","maxlength","150","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false","readonly","",1,"form-control",3,"placeholder"],["controllerName","txtEmail","controllerType","textbox","controllerTitle","\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9","maxLength","150",3,"mainForm"],[1,"form-group"],["for","companyName",1,"form-control-label"],["type","text","id","companyName","formControlName","txtCompanyName",1,"form-control",3,"placeholder"],[1,"col-md-6"],["for","txtFirstName",1,"form-control-label"],["type","text","formControlName","txtFirstName","maxlength","50","tabindex","1","autofocus","true","spellcheck","false","autocorrect","false","autocomplete","false",1,"form-control",3,"placeholder"],["controllerName","txtFirstName","controllerType","textbox","controllerTitle","\u304a\u540d\u524d\uff08\u82d7\u5b57\uff09","maxLength","50","minLength","",3,"mainForm"],["for","txtKanjiFirstName",1,"form-control-label"],["type","text","formControlName","txtKanjiFirstName","maxlength","50","tabindex","1","autofocus","true","spellcheck","false","autocorrect","false","autocomplete","false",1,"form-control",3,"placeholder"],["controllerName","txtKanjiFirstName","controllerType","textbox","controllerTitle","\u304a\u540d\u524d\uff08\u82d7\u5b57\uff09","maxLength","50","minLength","",3,"mainForm"],["for","phoneNumber",1,"form-control-label"],["type","text","id","phoneNumber","formControlName","txtPhoneNumber",1,"form-control",3,"placeholder"],["for","companyPostalCode",1,"form-control-label"],["mask","999-9999","formControlName","txtPostalCode",3,"placeholder"],["for","companyAddress",1,"form-control-label"],["type","text","id","companyAddress","formControlName","txtAddress",1,"form-control",3,"placeholder"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"label",3),e._uU(4),e.TgZ(5,"span"),e._uU(6,"*"),e.qZA(),e.qZA(),e._UZ(7,"input",4),e.TgZ(8,"div"),e._UZ(9,"common-validation-message",5),e.qZA(),e.qZA(),e.TgZ(10,"div",2),e.TgZ(11,"div",6),e.TgZ(12,"label",7),e._uU(13),e.TgZ(14,"span"),e._uU(15,"*"),e.qZA(),e.qZA(),e._UZ(16,"input",8),e.qZA(),e.qZA(),e.TgZ(17,"div",9),e.TgZ(18,"div",6),e.TgZ(19,"label",10),e._uU(20),e.TgZ(21,"span"),e._uU(22,"*"),e.qZA(),e.qZA(),e._UZ(23,"input",11),e.TgZ(24,"div"),e._UZ(25,"common-validation-message",12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",9),e.TgZ(27,"div",6),e.TgZ(28,"label",13),e._uU(29),e.qZA(),e._UZ(30,"input",14),e.TgZ(31,"div"),e._UZ(32,"common-validation-message",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",9),e.TgZ(34,"div",6),e.TgZ(35,"label",16),e._uU(36),e.qZA(),e._UZ(37,"input",17),e.qZA(),e.qZA(),e.TgZ(38,"div",9),e.TgZ(39,"div",6),e.TgZ(40,"label",18),e._uU(41),e.qZA(),e._UZ(42,"p-inputMask",19),e.qZA(),e.qZA(),e.TgZ(43,"div",9),e.TgZ(44,"div",6),e.TgZ(45,"label",20),e._uU(46),e.qZA(),e._UZ(47,"input",21),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",o.companyEditForm),e.xp6(4),e.hij("",o._translateService.instant("pages.company.labels.company-email")," "),e.xp6(3),e.Q6J("placeholder",o._translateService.instant("pages.company.placeholders.company-email")),e.xp6(2),e.Q6J("mainForm",o.companyEditForm),e.xp6(4),e.hij("",o._translateService.instant("pages.company.labels.company-name")," "),e.xp6(3),e.Q6J("placeholder",o._translateService.instant("pages.company.placeholders.company-name")),e.xp6(4),e.hij("",o._translateService.instant("pages.company.labels.company-owner-first-name")," "),e.xp6(3),e.Q6J("placeholder",o._translateService.instant("pages.company.placeholders.company-owner-first-name")),e.xp6(2),e.Q6J("mainForm",o.companyEditForm),e.xp6(4),e.hij("",o._translateService.instant("pages.company.labels.company-first-kana-name")," "),e.xp6(1),e.Q6J("placeholder",o._translateService.instant("pages.company.placeholders.company-first-kana-name")),e.xp6(2),e.Q6J("mainForm",o.companyEditForm),e.xp6(4),e.Oqu(o._translateService.instant("pages.company.labels.company-phone-number")),e.xp6(1),e.Q6J("placeholder",o._translateService.instant("pages.company.placeholders.company-phone-number")),e.xp6(4),e.Oqu(o._translateService.instant("pages.company.labels.company-postal-code")),e.xp6(1),e.Q6J("placeholder",o._translateService.instant("pages.company.placeholders.company-postal-code")),e.xp6(4),e.Oqu(o._translateService.instant("pages.company.labels.company-address")),e.xp6(1),e.Q6J("placeholder",o._translateService.instant("pages.company.placeholders.company-address")))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.nD,F.C,z.vy],styles:[".group-button[_ngcontent-%COMP%]{text-align:right}span[_ngcontent-%COMP%]{color:#dc3545}[_nghost-%COMP%]     .p-inputmask{width:100%;height:40px;border-radius:8px}[_nghost-%COMP%]     .p-calendar-w-btn .p-inputtext{border-radius:8px 0 0 8px}[_nghost-%COMP%]     .p-calendar-w-btn .p-datepicker-trigger{border-radius:0 8px 8px 0}[_nghost-%COMP%]     .p-calendar{width:100%;height:38px;border-radius:8px}[_nghost-%COMP%]     .p-button-text{background-color:#008cff;color:#fff;border-color:#0000}[_nghost-%COMP%]     .btn-update{margin-right:10px}[_nghost-%COMP%]     .p-datepicker td>span{display:initial;font-size:15px}[_nghost-%COMP%]     .ui-datepicker .ui-widget{font-size:20px}[_nghost-%COMP%]     .p-datepicker{z-index:1003!important;transform-origin:center top!important;left:-1px!important;top:-90px!important}"]}),s})();var G=m(8598),Y=m(8032),P=m(4207);function ee(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"label",24),e._uU(3),e.qZA(),e.TgZ(4,"input",25),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).customer.companyName=n}),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw(2);e.xp6(3),e.Oqu(t._translateService.instant("pages.customer.labels.customer-authorized-dealer")),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-authorized-dealer"))("ngModel",t.customer.companyName)}}function te(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"div",27),e.TgZ(1,"div",28),e.TgZ(2,"div",29),e._UZ(3,"img",30),e.qZA(),e._UZ(4,"div",31),e._UZ(5,"div",32),e.TgZ(6,"div"),e.TgZ(7,"button",33),e.NdJ("click",function(n){return e.CHM(t),e.oxw(3).handleShowFront(n)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw(3);e.xp6(3),e.Q6J("src",t.customer.customerIdentificationFront,e.LSH)}}function oe(s,c){if(1&s&&e.YNc(0,te,8,1,"div",26),2&s){const t=e.oxw(2);e.Q6J("ngIf",!t.currentFileFront)}}function ne(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"div",27),e.TgZ(1,"div",28),e.TgZ(2,"div",29),e._UZ(3,"img",30),e.qZA(),e._UZ(4,"div",31),e._UZ(5,"div",32),e.TgZ(6,"div"),e.TgZ(7,"button",33),e.NdJ("click",function(n){return e.CHM(t),e.oxw(3).handleShowBack(n)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw(3);e.xp6(3),e.Q6J("src",t.customer.customerIdentificationBack,e.LSH)}}function re(s,c){if(1&s&&e.YNc(0,ne,8,1,"div",26),2&s){const t=e.oxw(2);e.Q6J("ngIf",!t.currentFileBack)}}function se(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"p-button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateCustomer()}),e.qZA(),e.qZA()}if(2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t._translateService.instant("common.action.save"))}}function ae(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"form",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.TgZ(3,"div",4),e.TgZ(4,"label",5),e._uU(5),e.qZA(),e.TgZ(6,"input",6),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().customer.customerPhone=n}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",3),e.TgZ(8,"div",4),e.TgZ(9,"label",7),e._uU(10),e.qZA(),e.TgZ(11,"input",8),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().customer.customerEmail=n}),e.qZA(),e.TgZ(12,"div"),e._UZ(13,"common-validation-message",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",3),e.TgZ(15,"div",4),e.TgZ(16,"label",10),e._uU(17),e.qZA(),e.TgZ(18,"input",11),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().customer.customerName=n}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",3),e.TgZ(20,"div",4),e.TgZ(21,"label",12),e._uU(22),e.qZA(),e.TgZ(23,"p-calendar",13),e.NdJ("onSelect",function(n){return e.CHM(t),e.oxw().getDate(n)})("ngModelChange",function(n){return e.CHM(t),e.oxw().customerBirthday=n}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",3),e.TgZ(25,"div",4),e.TgZ(26,"label",14),e._uU(27),e.qZA(),e.TgZ(28,"input",15),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().customer.customerIdentification=n}),e.qZA(),e.qZA(),e.qZA(),e.YNc(29,ee,5,3,"div",16),e.TgZ(30,"div",3),e.TgZ(31,"div",4),e.TgZ(32,"label",17),e._uU(33),e.qZA(),e.TgZ(34,"input",18),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().customer.customerAddress=n}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",3),e.TgZ(36,"div",4),e.TgZ(37,"app-common-citis",19),e.NdJ("currentProvince",function(n){return e.CHM(t),e.oxw().getProvince(n)})("currentSelectedProvince",function(n){return e.CHM(t),e.oxw().getProvinced(n)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",3),e.TgZ(39,"div",4),e.TgZ(40,"label",20),e._uU(41,"CMND/CCCD M\u1eb7t Tr\u01b0\u1edbc"),e.qZA(),e.TgZ(42,"p-fileUpload",21),e.NdJ("customUpload",function(n){return e.CHM(t),e.oxw().onSelectEvent(n)})("onSelect",function(n){return e.CHM(t),e.oxw().onSelectFront(n)})("onRemove",function(n){return e.CHM(t),e.oxw().onRemoveFront(n)}),e.YNc(43,oe,1,1,"ng-template",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"div",3),e.TgZ(45,"div",4),e.TgZ(46,"label",20),e._uU(47,"CMND/CCCD M\u1eb7t Sau"),e.qZA(),e.TgZ(48,"p-fileUpload",21),e.NdJ("customUpload",function(n){return e.CHM(t),e.oxw().onSelectEvent(n)})("onSelect",function(n){return e.CHM(t),e.oxw().onSelectBack(n)})("onRemove",function(n){return e.CHM(t),e.oxw().onRemoveBack(n)}),e.YNc(49,re,1,1,"ng-template",22),e.qZA(),e.qZA(),e.qZA(),e.YNc(50,se,2,1,"div",23),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formGroup",t.customerCreateForm),e.xp6(5),e.Oqu(t._translateService.instant("pages.customer.labels.customer-phone-number")),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-phone-number"))("ngModel",t.customer.customerPhone),e.xp6(4),e.hij("",t._translateService.instant("pages.customer.labels.customer-email")," "),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-email"))("ngModel",t.customer.customerEmail),e.xp6(2),e.Q6J("mainForm",t.customerCreateForm),e.xp6(4),e.hij("",t._translateService.instant("pages.customer.labels.customer-full-name")," "),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-full-name"))("ngModel",t.customer.customerName),e.xp6(4),e.Oqu(t._translateService.instant("pages.customer.labels.customer-date-of-birth")),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-date-of-birth"))("showIcon",!0)("ngModel",t.customerBirthday),e.xp6(4),e.Oqu(t._translateService.instant("pages.customer.labels.customer-CMND-CCCD")),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-CMND-CCCD"))("ngModel",t.customer.customerIdentification),e.xp6(1),e.Q6J("ngIf",1===t.dataGroupId),e.xp6(4),e.Oqu(t._translateService.instant("pages.customer.labels.customer-address")),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-address"))("ngModel",t.customer.customerAddress),e.xp6(3),e.Q6J("isCustomerUpdation",t.isCustomerUpdation)("selectedProvince",t.customer.provinceId),e.xp6(5),e.Q6J("multiple",!1)("maxFileSize",5e6)("showUploadButton",!1)("showCancelButton",!1),e.xp6(6),e.Q6J("multiple",!1)("maxFileSize",5e6)("showUploadButton",!1)("showCancelButton",!1),e.xp6(2),e.Q6J("ngIf",t.isEdit)}}let ie=(()=>{class s extends A.H{constructor(t,o,n,r,a,l,d,g,h,C,f,p,u,I,H){super(t,o,n,r,a,l,d,h,g),this.customerService=C,this.formBuilder=f,this._ref=p,this.primeConfig=u,this.config=I,this._confirmationService=H,this.isCustomerUpdation=!0,this.activationEmailStatus=!1,this.isEdit=!1}ngOnInit(){this.isEdit=this.config.data.isEdit,this.dataGroupId=this.config.data.groupId,this.customerNo=this.config.data.customerNo,document.querySelector(".p-dialog-mask").style.pointerEvents="unset",this.doGetProfileCustomer(this.customerNo).then(o=>{this.currentProvinceId=o.provinceId,this.currentProvinceName=o.provinceName,this.customerImgFront=o.customerIdentificationFront,this.customerImgBack=o.customerIdentificationBack,this.customer=o,console.log(this.customer)}),this._translateService.get("primeng").subscribe(o=>this.primeConfig.setTranslation(o)),this.customerCreateForm=this.formBuilder.group({txtEmail:["",{validators:[i.kI.maxLength(150),i.kI.pattern(x.q.validators.patterns.email),i.kI.required],asyncValidators:[],updateOn:"change"}],txtPhoneNumber:["",{validators:[i.kI.maxLength(150),i.kI.pattern(x.q.validators.patterns.onlyNumeric)],asyncValidators:[],updateOn:"change"}],txtPassword:["",{validators:[i.kI.maxLength(150),i.kI.pattern(x.q.validators.patterns.onlyNumeric)],asyncValidators:[],updateOn:"change"}],txtCompanyName:["",{validators:[i.kI.maxLength(500),i.kI.required],asyncValidators:[],updateOn:"change"}],txtName:["",{validators:[i.kI.maxLength(50),i.kI.required],asyncValidators:[],updateOn:"change"}],txtIdentification:["",{validators:[i.kI.maxLength(150),i.kI.pattern(x.q.validators.patterns.onlyNumeric)],asyncValidators:[],updateOn:"change"}],txtBirthday:["",{validators:[],asyncValidators:[],updateOn:"change"}],txtAddress:["",{validators:[i.kI.maxLength(1e3)],asyncValidators:[],updateOn:"change"}],txtAuthorizedDealer:["",{validators:[i.kI.maxLength(100)],asyncValidators:[],updateOn:"change"}],file:new i.NI("",[i.kI.required])})}get email(){return this.customerCreateForm.get("email")}getDate(t){let o=new Date(Date.parse(t));this.currentBirthday=`${o.getFullYear()}/${o.getMonth()+1}/${o.getDate()}`}getGroup(t){this.currentGroupId=t}getProvince(t){this.currentProvinceId=t.value}getProvinced(t){this.currentProvinceId=t.provinceId,this.currentProvinceName=t.provinceName}isDisable(){return this.customerCreateForm.valid}onSelectEvent(t){console.log(t),this.currentFile=t}identityUpload(t){this.currentFile=t.currentFiles[0]}doVerificationCustomer(t,o,n){var r;console.log("click verify"),this._common.attachSpinner(),null===(r=this.customerService.doVerificationCustomer(t,o))||void 0===r||r.subscribe(a=>{200===a.responseStatus?(this._common.detachSpinner(),this.presentToast("success",this._translateService.instant(a.content.message)),console.log("do verify: ",a)):417===a.responseStatus?(this.presentToast("warning",this._translateService.instant(a.content.message)),this._common.detachSpinner()):(this.presentToast("error",this._translateService.instant(a.content.message)),this._common.detachSpinner())},a=>{console.log(a),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")),this._common.detachSpinner()})}doDelete(t,o){var n;null===(n=this.customerService.doDeleteNewCustomer(t))||void 0===n||n.subscribe(r=>{200===r.responseStatus?(this.presentToast("success",this._translateService.instant(r.content.message)),console.log("delete new customer: ",r)):this.presentToast(417===r.responseStatus?"warning":"error",this._translateService.instant(r.content.message))},r=>{console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))})}doGetProfileCustomer(t){return new Promise((o,n)=>{var r;null===(r=this.customerService.getProfileCustomer(t))||void 0===r||r.subscribe(a=>{200===a.responseStatus?(this.presentToast("success",this._translateService.instant(a.content.message)),this.customer=a.content.datas.customerDetail,this.customerBirthday=new Date(this.customer.customerBirthday),this.checkIfImageExists(this.customer.customerIdentificationFront),this.checkIfImageExists(this.customer.customerIdentificationBack),o(a.content.datas.customerDetail)):417===a.responseStatus?(this.presentToast("warning",this._translateService.instant(a.content.message)),n("Something Wrong")):(console.log(a),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")),n("Something Wrong")),n("Something Wrong")},a=>{console.log(a),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")),n("Something Wrong")})})}updateCustomer(){var t;this.currentBirthday=`${this.customerBirthday.getFullYear()}-${this.customerBirthday.getMonth()+1}-${this.customerBirthday.getDate()}`;let o=new FormData;console.log("id",this.currentProvinceId,this.customer.provinceId),console.log("name",this.currentProvinceName,this.customer.provinceName),console.log(this.currentFileFront,this.customerImgFront),console.log(this.currentFileBack,this.customerImgBack),o.append("customerIdentificationFront",this.currentFileFront||this.customerImgFront),o.append("customerIdentificationBack",this.currentFileBack||this.customerImgBack),o.append("customerPhone",this.customerCreateForm.value.txtPhoneNumber),o.append("customerEmail",this.customerCreateForm.value.txtEmail),o.append("customerName",this.customerCreateForm.value.txtName),o.append("companyName",this.customerCreateForm.value.txtCompanyName),o.append("customerIdentification",this.customerCreateForm.value.txtIdentification),o.append("customerBirthday",this.currentBirthday||this.customerBirthday.toString()),o.append("customerAddress",this.customerCreateForm.value.txtAddress),o.append("customerProvinceId",`${this.currentProvinceId}`),o.append("customerProvinceName",this.currentProvinceName),null===(t=this.customerService.updateNewCustomer(o,this.customerNo))||void 0===t||t.subscribe(n=>{if(n.type!==U.dt.UploadProgress&&n instanceof U.Zn){let r=n.body;console.log(r),200===r.responseStatus?this.presentToast("success",this._translateService.instant(r.content.message)):417===r.responseStatus?this.presentToast("warning",this._translateService.instant(r.content.message)):(console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")))}},n=>{console.log(n),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))})}onSelectFront(t){this.currentFileFront=t.files[0],console.log(this.currentFileFront)}onSelectBack(t){this.currentFileBack=t.files[0],console.log(this.currentFileBack)}handleDeletionRequestingProfile(){this.doDelete(this.customerNo,"B\u1ea1n mu\u1ed1n x\xf3a y\xeau c\u1ea7u c\u1eadp nh\u1eadt th\xf4ng tin c\u1ee7a kh\xe1ch h\xe0ng n\xe0y?")}onRemoveFront(t){this.currentFileFront=this.fileUndefined,console.log(this.currentFileFront)}onRemoveBack(t){this.currentFileBack=this.fileUndefined,console.log(this.currentFileBack)}handleShowFront(t){this.currentFileFront=this.customerImgFront}handleShowBack(t){this.currentFileBack=this.customerImgBack}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.gz),e.Y36(y.Dx),e.Y36(_.F0),e.Y36(b.uw),e.Y36(S.v),e.Y36(M.w),e.Y36(q._W),e.Y36(v.xA),e.Y36(w.sK),e.Y36(N.v),e.Y36(i.qu),e.Y36(v.E7),e.Y36(Z.b4),e.Y36(v.S),e.Y36(Z.YP))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-customer-update"]],features:[e.qOj],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["for","phoneNumber",1,"form-control-label"],["type","text","id","phoneNumber","formControlName","txtPhoneNumber","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","email",1,"form-control-label"],["type","email","formControlName","txtEmail","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["controllerName","txtEmail","controllerType","textbox","controllerTitle","\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9","maxLength","150",3,"mainForm"],["for","customerName",1,"form-control-label"],["type","text","id","customerName","formControlName","txtName","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","customerBirthday",1,"form-control-label"],["formControlName","txtBirthday","inputId","customerBirthday","dateFormat","dd/mm/yy",3,"placeholder","showIcon","ngModel","onSelect","ngModelChange"],["for","customerIdentification",1,"form-control-label"],["type","text","id","customerIdentification","formControlName","txtIdentification","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["class","col-md-12",4,"ngIf"],["for","customerAddress",1,"form-control-label"],["type","text","id","customerAddress","formControlName","txtAddress","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"isCustomerUpdation","selectedProvince","currentProvince","currentSelectedProvince"],["for","customerIdentificationFront",1,"form-control-label"],["name","docs[]","accept","image/*","invalidFileSizeMessageSummary","{0}: K\xedch th\u01b0\u1edbc t\u1ec7p kh\xf4ng h\u1ee3p l\u1ec7","invalidFileSizeMessageDetail","K\xedch th\u01b0\u1edbc t\u1ec7p t\u1ea3i l\xean t\u1ed1i \u0111a l\xe0 {0}.","chooseLabel","C\u1eadp nh\u1eadt \u1ea3nh","uploadLabel","T\u1ea3i l\xean","cancelLabel","H\u1ee7y",3,"multiple","maxFileSize","showUploadButton","showCancelButton","customUpload","onSelect","onRemove"],["pTemplate","content"],["class","p-dialog-footer button-create",4,"ngIf"],["for","customerAuthorizedDealer",1,"form-control-label"],["type","text","id","customerAuthorizedDealer","formControlName","txtAuthorizedDealer","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["class","p-fileupload-files",4,"ngIf"],[1,"p-fileupload-files"],[1,"p-fileupload-row"],[1,"-size-img"],["alt","Image",3,"src"],[1,"p-fileupload-filename"],[1,"p-fileupload-filesize"],["pButton","","type","button","icon","pi pi-times",1,"p-button-text",3,"click"],[1,"p-dialog-footer","button-create"],["styleClass","p-button-text p-button-primary",1,"float-end","ms-2",3,"label","click"]],template:function(t,o){1&t&&e.YNc(0,ae,51,33,"form",0),2&t&&e.Q6J("ngIf",o.customer)},directives:[T.O5,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,F.C,G.f,Y.$,O.p,Z.jx,P.Hq,P.zx],styles:["span[_ngcontent-%COMP%]{color:#dc3545}.badge[_ngcontent-%COMP%]{height:35px;padding-top:10px;background-color:#d7edff;border:1px solid #51acf6}.badge-secondary[_ngcontent-%COMP%]{color:#008cff}.row[_ngcontent-%COMP%]{margin-top:15px}.group-button[_ngcontent-%COMP%]{text-align:right}.button-create[_ngcontent-%COMP%]{padding:1rem 0 0}.activation-email[_ngcontent-%COMP%]{padding-top:1.5rem}[_nghost-%COMP%]     .p-inputmask{width:100%;height:40px;border-radius:8px}[_nghost-%COMP%]     .p-dialog-mask{background-color:#a9a99f;pointer-events:unset!important}[_nghost-%COMP%]     .p-calendar-w-btn .p-inputtext{border-radius:8px 0 0 8px}[_nghost-%COMP%]     .p-calendar-w-btn .p-datepicker-trigger{border-radius:0 8px 8px 0}[_nghost-%COMP%]     .p-calendar{width:100%;height:38px;border-radius:8px}[_nghost-%COMP%]     .p-button-text{background-color:#008cff;color:#fff;border-color:#0000}[_nghost-%COMP%]     .p-datepicker td>span{display:initial;font-size:15px}[_nghost-%COMP%]     .ui-datepicker .ui-widget{font-size:20px}[_nghost-%COMP%]     .p-datepicker{z-index:1003!important;transform-origin:center top!important;left:-1px!important;top:-90px!important}[_nghost-%COMP%]     .p-button.btn-update, [_nghost-%COMP%]     .p-button.btn-update .p-button{padding:2px}[_nghost-%COMP%]     .pointer-unset{pointer-events:unset!important}.-size-img[_ngcontent-%COMP%]{display:inline-block;width:50px;height:inherit}.-size-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:auto;object-fit:cover}"]}),s})();var B=m(2111),ce=m(7258),le=m(103);let me=(()=>{class s extends A.H{constructor(t,o,n,r,a,l,d,g,h){super(t,o,n,r,a,l,d,h,g),this.currentMember=new e.vpe,this.currentGroups=new e.vpe}ngOnInit(){this._common.memberSelection.subscribe(t=>{const o=[{membershipId:0,membershipType:0,membershipNextId:0,membershipClass:"Ch\u1ecdn H\u1ea1ng",membershipPoint:0,membershipDescription:"",createdUser:900000000010,createdDate:new Date,updatedUser:0,updatedDate:new Date,status:9},...t];this.memberList=o})}getGroup(t,o){this.currentMember.emit(o.selectedOption)}getGroups(t){this.currentGroups.emit(t.value)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.gz),e.Y36(y.Dx),e.Y36(_.F0),e.Y36(b.uw),e.Y36(S.v),e.Y36(M.w),e.Y36(q._W),e.Y36(v.xA),e.Y36(w.sK))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-common-member-ship"]],inputs:{selectedMember:"selectedMember"},outputs:{currentMember:"currentMember",currentGroups:"currentGroups"},features:[e.qOj],decls:6,vars:4,consts:[[1,"row"],[1,"col-md-12"],[1,"form-control-label"],["optionLabel","membershipClass","optionValue","membershipId",1,"common-dropdown","p-inputtext-sm",3,"options","placeholder","ngModel","onChange","ngModelChange"],["member",""]],template:function(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"label",2),e._uU(3),e.qZA(),e.TgZ(4,"p-dropdown",3,4),e.NdJ("onChange",function(a){return o.getGroups(a)})("onChange",function(a){e.CHM(n);const l=e.MAs(5);return o.getGroup(a,l)})("ngModelChange",function(a){return o.selectedMember=a}),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(3),e.hij("",o._translateService.instant("common.rank.labels.rank"),":"),e.xp6(1),e.Q6J("options",o.memberList)("placeholder",o._translateService.instant("common.rank.placeholders.rank"))("ngModel",o.selectedMember))},directives:[le.Lt,i.JJ,i.On],styles:[""]}),s})();function ue(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"app-common-member-ship",30),e.NdJ("currentMember",function(n){return e.CHM(t),e.oxw().getMember(n)}),e.qZA(),e.qZA(),e.qZA()}}let Q=(()=>{class s extends A.H{constructor(t,o,n,r,a,l,d,g,h,C,f,p,u,I){super(o,n,r,a,l,d,g,C,h),this.commonService=t,this.formBuilder=f,this.primeConfig=p,this.customerService=u,this._ref=I,this.isCustomerList=!0,this.isCustomerNewList=!1,this.newCustomerRequestingListEvent=new e.vpe,this.searchEvent=new e.vpe,this.currentPage={first:0,rows:10,page:0,pageCount:10}}ngOnInit(){this._translateService.get("primeng").subscribe(t=>this.primeConfig.setTranslation(t)),this.customerSearch=this.formBuilder.group({txtEmail:["",{validators:[i.kI.maxLength(150),i.kI.pattern(x.q.validators.patterns.email)],asyncValidators:[],updateOn:"change"}],txtPhoneNumber:["",{validators:[i.kI.maxLength(12),i.kI.minLength(8),i.kI.pattern(x.q.validators.patterns.onlyNumeric)],asyncValidators:[],updateOn:"change"}],txtCustomerNo:["",{validators:[i.kI.maxLength(18)],asyncValidators:[],updateOn:"change"}],txtCompanyName:["",{validators:[i.kI.maxLength(100)],asyncValidators:[],updateOn:"change"}],txtName:["",{validators:[i.kI.maxLength(50)],asyncValidators:[],updateOn:"change"}],txtIdentification:["",{validators:[i.kI.maxLength(50),i.kI.pattern(x.q.validators.patterns.onlyNumeric)],asyncValidators:[],updateOn:"change"}],txtAddress:["",{validators:[i.kI.maxLength(1e3)],asyncValidators:[],updateOn:"change"}]})}searchCustomerRequestingUpdation(){var t,o,n;const r={page:this.currentPage.page+1,itemPerPage:this.currentPage.rows.toString(),customerAddress:this.customerSearch.value.txtAddress,customerEmail:this.customerSearch.value.txtEmail,customerIdentification:this.customerSearch.value.txtIdentification,customerName:this.customerSearch.value.txtName,customerNo:this.customerSearch.value.txtCustomerNo,customerPhone:this.customerSearch.value.txtPhoneNumber,groupId:(null===(t=this.currentGroup)||void 0===t?void 0:t.groupId)||0,provinceId:null===(o=this.currentProvince)||void 0===o?void 0:o.provinceId,companyName:this.customerSearch.value.txtCompanyName};console.log("searchCustomer",r),null===(n=this.customerService.advancedSearchRequestingUpdation(r))||void 0===n||n.subscribe(a=>{200===a.responseStatus?(console.log(a),this.newCustomerRequestingUpdationList=a.content.datas.datasList,this.addNewCustomerRequestingUpdationList(this.newCustomerRequestingUpdationList),this.presentToast("success",this._translateService.instant(a.content.message)),this._ref.close()):417===a.responseStatus?this.presentToast("warning",this._translateService.instant(a.content.message)):this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))},a=>{console.error(a),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))})}searchCustomer(){var t,o,n,r;const a={page:this.currentPages,itemPerPage:this.itemPage,customerPhone:this.customerSearch.value.txtPhoneNumber,customerEmail:this.customerSearch.value.txtEmail,customerName:this.customerSearch.value.txtName,companyName:this.customerSearch.value.txtCompanyName,customerNo:this.customerSearch.value.txtCustomerNo,customerIdentification:this.customerSearch.value.txtIdentification,customerAddress:this.customerSearch.value.txtAddress,provinceId:null===(t=this.currentProvince)||void 0===t?void 0:t.provinceId,groupId:this.currentGroupId,membershipId:(null===(o=this.currentMembership)||void 0===o?void 0:o.membershipId)||0};console.log("newCustomer: ",a),this.isCustomerNewList?null===(n=this.customerService.advancedSearchNewCustomer(a))||void 0===n||n.subscribe(l=>{200===l.responseStatus?(this.presentToast("success",this._translateService.instant(l.content.message)),this.searchEvent.emit(l.content.datas.datasList),this._ref.close()):417===l.responseStatus?this.presentToast("warning",this._translateService.instant(l.content.message)):(console.log(l),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")))},l=>{console.log(l),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))}):null===(r=this.customerService.advancedSearch(a))||void 0===r||r.subscribe(l=>{200===l.responseStatus?(this.presentToast("success",this._translateService.instant(l.content.message)),this.searchEvent.emit(l.content.datas.datasList),this._ref.close()):417===l.responseStatus?this.presentToast("warning",this._translateService.instant(l.content.message)):(console.log(l),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")))},l=>{console.log(l),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))})}getProvinces(t){console.log(t),this.currentProvinceId=t.value}getGroups(t){this.currentGroupId=t}addNewCustomerRequestingUpdationList(t){this.newCustomerRequestingListEvent.emit(t)}getProvinced(t){console.log(t),this.currentProvince=t}getGroup(t){console.log(t),this.currentGroup=t}getMember(t){console.log("member",t),this.currentMembership=t}isDisable(){return this.customerSearch.valid}getProvince(t){this.currentProvince=t.value}getCustomerRank(t){this.currentRank=t.value}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(S.v),e.Y36(_.gz),e.Y36(y.Dx),e.Y36(_.F0),e.Y36(b.uw),e.Y36(S.v),e.Y36(M.w),e.Y36(q._W),e.Y36(v.xA),e.Y36(w.sK),e.Y36(i.qu),e.Y36(Z.b4),e.Y36(N.v),e.Y36(v.E7))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-common-advanced-search"]],inputs:{isCustomerList:"isCustomerList",isCustomerNewList:"isCustomerNewList",isCustomerUpdation:"isCustomerUpdation"},outputs:{newCustomerRequestingListEvent:"newCustomerRequestingListEvent",searchEvent:"searchEvent"},features:[e.qOj],decls:56,vars:32,consts:[[1,"form",3,"formGroup"],[1,"row","input-field"],[1,"col-md-6"],[1,"form-group"],["for","customerNo",1,"form-control-label"],["type","text","id","customerNo","formControlName","txtCustomerNo",1,"form-control",3,"placeholder"],["controllerName","txtCustomerNo","controllerType","textbox","maxLength","18",3,"mainForm","controllerTitle"],[3,"currentGroup","currentGroups"],["for","customerName",1,"form-control-label"],["type","text","id","customerName","formControlName","txtName",1,"form-control",3,"placeholder"],["controllerName","txtName","controllerType","textbox","maxLength","50",3,"mainForm","controllerTitle"],["for","customerIdentification",1,"form-control-label"],["type","text","id","customerIdentification","formControlName","txtIdentification",1,"form-control",3,"placeholder"],["controllerName","txtIdentification","controllerType","textbox","maxLength","50",3,"mainForm","controllerTitle"],["for","customerEmail",1,"form-control-label"],["type","text","id","customerEmail","formControlName","txtEmail",1,"form-control",3,"placeholder"],["controllerName","txtEmail","controllerType","textbox","maxLength","150",3,"mainForm","controllerTitle"],["for","customerPhone",1,"form-control-label"],["type","text","id","customerPhone","formControlName","txtPhoneNumber",1,"form-control",3,"placeholder"],["controllerName","txtPhoneNumber","controllerType","textbox","maxLength","12","minLength","8",3,"mainForm","controllerTitle"],["for","customerCompanyName",1,"form-control-label"],["type","text","id","customerCompanyName","formControlName","txtCompanyName",1,"form-control",3,"placeholder"],["controllerName","txtCompanyName","controllerType","textbox","maxLength","100",3,"mainForm","controllerTitle"],["for","customerAddress",1,"form-control-label"],["type","text","id","customerAddress","formControlName","txtAddress",1,"form-control",3,"placeholder"],["controllerName","txtAddress","controllerType","textbox","maxLength","1000",3,"mainForm","controllerTitle"],[3,"isCustomerUpdation","currentProvince","currentProvinces","currentSelectedProvince"],["class","col-md-6",4,"ngIf"],[1,"col-md-6","flex","btn-search"],["pButton","","type","button","label","L\u1ecdc Danh S\xe1ch",3,"click"],[3,"currentMember"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.TgZ(1,"h5"),e._uU(2),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"label",4),e._uU(8),e.qZA(),e._UZ(9,"input",5),e._UZ(10,"common-validation-message",6),e.qZA(),e.qZA(),e.TgZ(11,"div",2),e.TgZ(12,"div",3),e.TgZ(13,"app-common-group",7),e.NdJ("currentGroup",function(r){return o.getGroup(r)})("currentGroups",function(r){return o.getGroups(r)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",2),e.TgZ(15,"div",3),e.TgZ(16,"label",8),e._uU(17),e.qZA(),e._UZ(18,"input",9),e._UZ(19,"common-validation-message",10),e.qZA(),e.qZA(),e.TgZ(20,"div",2),e.TgZ(21,"div",3),e.TgZ(22,"label",11),e._uU(23),e.qZA(),e._UZ(24,"input",12),e._UZ(25,"common-validation-message",13),e.qZA(),e.qZA(),e.TgZ(26,"div",2),e.TgZ(27,"div",3),e.TgZ(28,"label",14),e._uU(29),e.qZA(),e._UZ(30,"input",15),e._UZ(31,"common-validation-message",16),e.qZA(),e.qZA(),e.TgZ(32,"div",2),e.TgZ(33,"div",3),e.TgZ(34,"label",17),e._uU(35),e.qZA(),e._UZ(36,"input",18),e._UZ(37,"common-validation-message",19),e.qZA(),e.qZA(),e.TgZ(38,"div",2),e.TgZ(39,"div",3),e.TgZ(40,"label",20),e._uU(41),e.qZA(),e._UZ(42,"input",21),e._UZ(43,"common-validation-message",22),e.qZA(),e.qZA(),e.TgZ(44,"div",2),e.TgZ(45,"div",3),e.TgZ(46,"label",23),e._uU(47),e.qZA(),e._UZ(48,"input",24),e._UZ(49,"common-validation-message",25),e.qZA(),e.qZA(),e.TgZ(50,"div",2),e.TgZ(51,"div",3),e.TgZ(52,"app-common-citis",26),e.NdJ("currentProvince",function(r){return o.getProvince(r)})("currentProvinces",function(r){return o.getProvinces(r)})("currentSelectedProvince",function(r){return o.getProvinced(r)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(53,ue,3,0,"div",27),e.TgZ(54,"div",28),e.TgZ(55,"button",29),e.NdJ("click",function(){return o.isCustomerUpdation?o.searchCustomerRequestingUpdation():o.searchCustomer()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",o.customerSearch),e.xp6(2),e.hij(" ",o._translateService.instant("common.form.title.advanced-search")," "),e.xp6(6),e.hij("",o._translateService.instant("pages.customer.labels.customer-no"),": "),e.xp6(1),e.Q6J("placeholder",o._translateService.instant("pages.customer.placeholders.customer-number-of-employees")),e.xp6(1),e.Q6J("mainForm",o.customerSearch)("controllerTitle",o._translateService.instant("pages.customer.labels.customer-no")),e.xp6(7),e.hij("",o._translateService.instant("pages.customer.labels.customer-full-name"),":"),e.xp6(1),e.Q6J("placeholder",o._translateService.instant("pages.customer.placeholders.customer-full-name")),e.xp6(1),e.Q6J("mainForm",o.customerSearch)("controllerTitle",o._translateService.instant("pages.customer.labels.customer-full-name")),e.xp6(4),e.hij("",o._translateService.instant("pages.customer.labels.customer-CMND-CCCD"),":"),e.xp6(1),e.Q6J("placeholder",o._translateService.instant("pages.customer.placeholders.customer-CMND-CCCD")),e.xp6(1),e.Q6J("mainForm",o.customerSearch)("controllerTitle",o._translateService.instant("pages.customer.labels.customer-CMND-CCCD")),e.xp6(4),e.hij("",o._translateService.instant("pages.customer.labels.customer-email"),":"),e.xp6(1),e.Q6J("placeholder",o._translateService.instant("pages.customer.placeholders.customer-email")),e.xp6(1),e.Q6J("mainForm",o.customerSearch)("controllerTitle",o._translateService.instant("pages.customer.labels.customer-email")),e.xp6(4),e.hij("",o._translateService.instant("pages.customer.labels.customer-phone-number"),": "),e.xp6(1),e.Q6J("placeholder",o._translateService.instant("pages.customer.placeholders.customer-phone-number")),e.xp6(1),e.Q6J("mainForm",o.customerSearch)("controllerTitle",o._translateService.instant("pages.customer.labels.customer-phone-number")),e.xp6(4),e.hij("",o._translateService.instant("pages.customer.labels.customer-company-name"),": "),e.xp6(1),e.Q6J("placeholder",o._translateService.instant("pages.customer.placeholders.customer-company-name")),e.xp6(1),e.Q6J("mainForm",o.customerSearch)("controllerTitle",o._translateService.instant("pages.customer.labels.customer-company-name")),e.xp6(4),e.hij("",o._translateService.instant("pages.customer.labels.customer-address"),":"),e.xp6(1),e.Q6J("placeholder",o._translateService.instant("pages.customer.placeholders.customer-address")),e.xp6(1),e.Q6J("mainForm",o.customerSearch)("controllerTitle",o._translateService.instant("pages.customer.labels.customer-address")),e.xp6(3),e.Q6J("isCustomerUpdation",o.isCustomerUpdation),e.xp6(1),e.Q6J("ngIf",o.isCustomerList))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,F.C,ce.Z,Y.$,T.O5,P.Hq,me],styles:[".form[_ngcontent-%COMP%]{width:100%;height:auto;background-color:#fff;border:1px solid lightgrey;border-radius:20px;margin-top:2rem}.form[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:1rem 0 0 1rem}.form[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{justify-content:end;padding:0 2rem}[_nghost-%COMP%]     .p-button-text{width:120px;background-color:#008cff;color:#fff;border-color:#0000;text-align:center}.btn-search[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:center;margin:.75rem 0}"]}),s})();var V=m(3473),R=m(464);const pe=[{id:1,name:"Zeit Th\xe2n Thi\u1ebft"},{id:2,name:"test update"},{id:3,name:"Zeit T\xe2m Giao"},{id:4,name:"Zeit Tri K\u1ef7"},{id:5,name:"Zeit Ti\u1ec1m N\u0103ng"},{id:6,name:"Zeit T\xe0i N\u0103ng"},{id:7,name:"Zeit Chuy\xean Gia"},{id:8,name:"Zeit Ngo\u1ea1i H\u1ea1ng"}];let de=(()=>{class s{transform(t){const o=pe.filter(n=>n.id==t).map(n=>n.name);return o.length>0?o[0]:"Ch\u01b0a C\xf3 H\u1ea1ng"}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275pipe=e.Yjl({name:"toMemberShip",type:s,pure:!0}),s})();function ge(s,c){if(1&s&&(e.TgZ(0,"div",8),e.TgZ(1,"h5"),e._uU(2),e.qZA(),e._UZ(3,"span"),e.qZA()),2&s){const t=e.oxw(2);e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.table-title")," ")}}function he(s,c){1&s&&(e.TgZ(0,"tr"),e.TgZ(1,"th",9),e._uU(2,"H\xe0nh \u0110\u1ed9ng"),e.qZA(),e.TgZ(3,"th",10),e._uU(4,"Tr\u1ea1ng Th\xe1i"),e.qZA(),e.TgZ(5,"th",10),e._uU(6,"Avatar"),e.qZA(),e.TgZ(7,"th",11),e._uU(8,"M\xe3 Kh\xe1ch H\xe0ng"),e.qZA(),e.TgZ(9,"th",12),e._uU(10,"Lo\u1ea1i"),e.qZA(),e.TgZ(11,"th",13),e._uU(12,"H\u1ecd v\xe0 T\xean"),e.qZA(),e.TgZ(13,"th",14),e._uU(14,"CMND/CCCD"),e.qZA(),e.TgZ(15,"th",15),e._uU(16,"\u0110i\u1ec7n Tho\u1ea1i"),e.qZA(),e.TgZ(17,"th",16),e._uU(18,"Email"),e.qZA(),e.TgZ(19,"th",17),e._uU(20,"H\u1ea1ng Th\xe0nh Vi\xean"),e.qZA(),e.qZA())}function _e(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit;return e.oxw(2).doDeactive(n.customerNo,-1,"T\u1eaft tr\u1ea1ng th\xe1i ho\u1ea1t \u0111\u1ed9ng")}),e.qZA()}}function fe(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"td",22),e.TgZ(1,"button",23),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).showModalDialog(n.customerNo,n.groupId)}),e.qZA(),e._uU(2," | "),e.YNc(3,_e,1,0,"button",24),e._uU(4," | "),e.TgZ(5,"button",25),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).doDelete(n.customerNo,"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a t\xe0i kho\u1ea3n n\xe0y kh\xf4ng?")}),e.qZA(),e.qZA()}if(2&s){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",1==t.status)}}function ve(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit;return e.oxw(2).doActive(n.customerNo,1,"M\u1edf tr\u1ea1ng th\xe1i ho\u1ea1t \u0111\u1ed9ng")}),e.qZA()}}function Ce(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"td",22),e.TgZ(1,"button",23),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).showModalDialog(n.customerNo,n.groupId)}),e.qZA(),e._uU(2," | "),e.YNc(3,ve,1,0,"button",27),e._uU(4," | "),e.TgZ(5,"button",25),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).doDelete(n.customerNo,"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a t\xe0i kho\u1ea3n n\xe0y kh\xf4ng?")}),e.qZA(),e.qZA()}if(2&s){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",-1==t.status||0==t.status)}}function xe(s,c){1&s&&(e.TgZ(0,"p",32),e._uU(1," \u0110ang ho\u1ea1t \u0111\u1ed9ng "),e.qZA())}function Ze(s,c){1&s&&(e.TgZ(0,"p",33),e._uU(1," Ng\u01b0ng ho\u1ea1t \u0111\u1ed9ng "),e.qZA())}function be(s,c){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,xe,2,0,"p",30),e.YNc(2,Ze,2,0,"p",31),e.qZA()),2&s){const t=e.oxw().$implicit,o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==o[t.field]),e.xp6(1),e.Q6J("ngIf",-1==o[t.field]||0==o[t.field])}}function Te(s,c){if(1&s&&(e.TgZ(0,"td",10),e.YNc(1,be,3,2,"div",29),e.qZA()),2&s){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf","status"==t.type)}}function Se(s,c){if(1&s&&(e.TgZ(0,"tr"),e.YNc(1,fe,6,1,"td",18),e.YNc(2,Ce,6,1,"td",18),e.YNc(3,Te,2,1,"td",19),e.TgZ(4,"td",10),e._UZ(5,"img",20),e.qZA(),e.TgZ(6,"td",21),e._uU(7),e.qZA(),e.TgZ(8,"td",12),e._uU(9),e.qZA(),e.TgZ(10,"td",13),e._uU(11),e.qZA(),e.TgZ(12,"td",14),e._uU(13),e.qZA(),e.TgZ(14,"td",15),e._uU(15),e.qZA(),e.TgZ(16,"td",16),e._uU(17),e.qZA(),e.TgZ(18,"td",17),e._uU(19),e.ALo(20,"toMemberShip"),e.qZA(),e.qZA()),2&s){const t=c.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",1===t.status),e.xp6(1),e.Q6J("ngIf",-1===t.status||0===t.status),e.xp6(1),e.Q6J("ngForOf",o.cols),e.xp6(2),e.s9C("src",t.customerAvatar,e.LSH),e.xp6(2),e.hij(" ",t.customerNo," "),e.xp6(2),e.hij(" ",t.groupName," "),e.xp6(2),e.hij(" ",t.customerName," "),e.xp6(2),e.hij(" ",t.customerIdentification," "),e.xp6(2),e.hij(" ",t.customerPhone," "),e.xp6(2),e.hij(" ",t.customerEmail," "),e.xp6(2),e.hij(" ",e.lcZ(20,11,t.membershipId)," ")}}const Ae=function(){return[5,10,15]};function ye(s,c){if(1&s&&(e.TgZ(0,"div",3),e.TgZ(1,"p-table",4),e.YNc(2,ge,4,1,"ng-template",5),e.YNc(3,he,21,0,"ng-template",6),e.YNc(4,Se,21,13,"ng-template",7),e.qZA(),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("value",t.customerList)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(5,Ae))}}let Me=(()=>{class s extends A.H{constructor(t,o,n,r,a,l,d,g,h,C,f,p){super(t,o,n,r,a,l,d,g,h),this.dialog=C,this.customerService=f,this._confirmationService=p,this.customerInitialized=!1,this.currentPage={first:0,rows:10,page:0,pageCount:10},this._pageTitle.setTitle(this._translateService.instant("pages.customer.labels.page-title"))}ngOnInit(){this.initializePage()}initializePage(){this.cols=[{field:"status",header:this._translateService.instant("pages.customer.labels.status"),type:"status"}],this.getCustomerList()}getCustomerList(){var t=this;return(0,D.Z)(function*(){t._common.attachSpinner(),(0,E.D)({response:t.customerService.getCustomerList({page:t.currentPage.page+1,perPage:t.currentPage.rows,sort:{filedName:"",sortType:"asc|desc"}}),customerInitialized:(0,k.of)(!0)}).pipe((0,L.g)(t.loadingTime)).subscribe(o=>{200===o.response.responseStatus?(t.customerList=o.response.content.datas.datasList,t.totalRecords=o.response.content.datas.totalDatas,t.pageLinks=Math.round(t.totalRecords/t.currentPage.rows+1),t.presentToast("success",t._translateService.instant(o.response.content.message))):t.presentToast(417===o.response.responseStatus?"warning":"error",t._translateService.instant(o.response.content.message)),t._common.detachSpinner()},o=>{console.log(o),t.presentToast("error",t._translateService.instant("common.errors-message.common-server-error"))})})()}doDeactive(t,o,n){this._confirmationService.confirm({message:n,accept:()=>{var r;null===(r=this.customerService.doDeactiveCustomer(t,o))||void 0===r||r.subscribe(a=>{200===a.responseStatus?(this.presentToast("success",this._translateService.instant(a.content.message)),this.getCustomerList()):this.presentToast(417===a.responseStatus?"warning":"error",this._translateService.instant(a.content.message))},a=>{console.log(a),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))})}})}doActive(t,o,n){this._confirmationService.confirm({message:n,accept:()=>{var r;null===(r=this.customerService.doActiveCustomer(t,o))||void 0===r||r.subscribe(a=>{200===a.responseStatus?(this.presentToast("success",this._translateService.instant(a.content.message)),this.getCustomerList()):this.presentToast(417===a.responseStatus?"warning":"error",this._translateService.instant(a.content.message))},a=>{console.log(a),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))})}})}doEdit(t){var o;this._common.attachSpinner(),null===(o=this.customerService.getProfileCustomer(t))||void 0===o||o.subscribe(n=>{200===n.responseStatus?(this._common.detachSpinner(),console.log("do edit: ",n)):417===n.responseStatus?(this.presentToast("warning",this._translateService.instant(n.content.message)),this._common.detachSpinner()):(this.presentToast("error",this._translateService.instant(n.content.message)),this._common.detachSpinner())},n=>{console.log(n),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")),this._common.detachSpinner()})}doDelete(t,o){this._confirmationService.confirm({message:o,accept:()=>{var n;null===(n=this.customerService.doDeleteCustomer(t))||void 0===n||n.subscribe(r=>{200===r.responseStatus?this.presentToast("success",this._translateService.instant(r.content.message)):this.presentToast(417==r.responseStatus?"warning":"error",this._translateService.instant(r.statusText))},r=>{this.presentToast("error",this._translateService.instant(r))})}})}openDialog(t){this.customerService.setCurrentCompany(t),this._dialog.open(J,{header:this._translateService.instant("pages.company.labels.detail-dialog-title"),width:"50vw"})}showModalDialog(t,o){this._dialog.open(ie,{header:this.changeHeaderDialog(o),width:"40vw",data:{isEdit:!0,customerNo:t,groupId:o}}).onClose.subscribe(r=>this.getCustomerList())}changeHeaderDialog(t){return this._translateService.instant(1===t?"pages.customer.labels.update-dialog-title-prime":"pages.customer.labels.update-dialog-title-second")}receiveSearch(t){this.customerList=t}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.gz),e.Y36(y.Dx),e.Y36(_.F0),e.Y36(b.uw),e.Y36(S.v),e.Y36(M.w),e.Y36(q._W),e.Y36(w.sK),e.Y36(v.xA),e.Y36(b.uw),e.Y36(N.v),e.Y36(Z.YP))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-customer-list"]],inputs:{cols:"cols"},features:[e.qOj],decls:4,vars:1,consts:[[3,"searchEvent"],["header","X\xe1c Nh\u1eadn","icon","pi pi-exclamation-triangle"],["class","app-table mt-5",4,"ngIf"],[1,"app-table","mt-5"],["styleClass","p-datatable-sm p-datatable-gridlines","responsiveLayout","scroll","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","scrollHeight","400px",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","table-caption"],[1,"column-1"],[1,"column-2"],[1,"column-3"],[1,"column-4"],[1,"column-5"],[1,"column-6"],[1,"column-7"],[1,"column-8"],[1,"column-9"],["class","app-table-action column-1",4,"ngIf"],["class","column-2",4,"ngFor","ngForOf"],["alt","customer-avatar","width","50px","height","50px",1,"avatar",3,"src"],[1,"column-3","customer-no"],[1,"app-table-action","column-1"],["pButton","","pRipple","","type","button","label","S\u1eeda",1,"p-button-success","p-button-text","mr-2",3,"click"],["pButton","","pRipple","","type","button","label","H\u1ee7y","class","p-button-warning p-button-text mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","X\xf3a",1,"p-button-danger","p-button-text","mr-2",3,"click"],["pButton","","pRipple","","type","button","label","H\u1ee7y",1,"p-button-warning","p-button-text","mr-2",3,"click"],["pButton","","pRipple","","type","button","label","M\u1edf","class","p-button-warning p-button-text mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","M\u1edf",1,"p-button-warning","p-button-text","mr-2",3,"click"],[4,"ngIf"],["class","active",4,"ngIf"],["class","inactive",4,"ngIf"],[1,"active"],[1,"inactive"]],template:function(t,o){1&t&&(e.TgZ(0,"app-main-layout"),e.TgZ(1,"app-common-advanced-search",0),e.NdJ("searchEvent",function(r){return o.receiveSearch(r)}),e.qZA(),e._UZ(2,"p-confirmDialog",1),e.YNc(3,ye,5,6,"div",2),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",o.customerList))},directives:[B.f,Q,V.Q,T.O5,R.iA,Z.jx,T.sg,P.Hq],pipes:[de],styles:[".group-button[_ngcontent-%COMP%]{text-align:right}.create-button[_ngcontent-%COMP%]{background-color:#008cff;color:#fff}.custom-plus[_ngcontent-%COMP%]{padding:3px;font-weight:bold;border:2px solid white;border-radius:50%;margin-right:7px}.form[_ngcontent-%COMP%]{width:100%;height:auto;background-color:#fff;border:1px solid lightgrey;border-radius:20px;margin-top:2rem}.form[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:1rem 0 0 1rem}.form[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{justify-content:center;padding:0 2rem}[_nghost-%COMP%]     .p-button-text{width:120px;background-color:#008cff;color:#fff;border-color:#0000;text-align:center}.input-cate-account[_ngcontent-%COMP%]{margin-right:auto}.app-table[_ngcontent-%COMP%]{width:100%;height:auto;box-shadow:#959da533 0 8px 24px!important;background-color:#fff!important;margin-top:2rem;padding:5px}.app-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .app-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{justify-content:center}.app-table[_ngcontent-%COMP%]   .column-1[_ngcontent-%COMP%]{min-width:260px}.app-table[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]{min-width:150px}.app-table[_ngcontent-%COMP%]   .column-3[_ngcontent-%COMP%]{min-width:220px}.app-table[_ngcontent-%COMP%]   .column-4[_ngcontent-%COMP%]{min-width:120px}.app-table[_ngcontent-%COMP%]   .column-5[_ngcontent-%COMP%]{min-width:170px}.app-table[_ngcontent-%COMP%]   .column-6[_ngcontent-%COMP%]{min-width:170px}.app-table[_ngcontent-%COMP%]   .column-7[_ngcontent-%COMP%]{min-width:170px}.app-table[_ngcontent-%COMP%]   .column-8[_ngcontent-%COMP%]{min-width:280px}.app-table[_ngcontent-%COMP%]   .column-9[_ngcontent-%COMP%]{min-width:150px}.table-caption[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.btn-search[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.customer-no[_ngcontent-%COMP%]{text-decoration:underline;color:#008cff}.active[_ngcontent-%COMP%]{color:green;margin:auto}.inactive[_ngcontent-%COMP%]{color:red;margin:auto}.avatar[_ngcontent-%COMP%]{border-radius:50%}"]}),s})();function qe(s,c){if(1&s&&(e.TgZ(0,"div",7),e.TgZ(1,"h5"),e._uU(2),e.qZA(),e._UZ(3,"span"),e.qZA()),2&s){const t=e.oxw();e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.table-title")," ")}}function we(s,c){if(1&s&&(e.TgZ(0,"tr"),e.TgZ(1,"th",8),e._uU(2),e.qZA(),e.TgZ(3,"th"),e._uU(4),e.qZA(),e.TgZ(5,"th"),e._uU(6),e.qZA(),e.TgZ(7,"th",8),e._uU(8),e.qZA(),e.TgZ(9,"th"),e._uU(10),e.qZA(),e.TgZ(11,"th",8),e._uU(12),e.qZA(),e.TgZ(13,"th"),e._uU(14),e.qZA(),e.TgZ(15,"th"),e._uU(16),e.qZA(),e.TgZ(17,"th",9),e._uU(18),e.qZA(),e.TgZ(19,"th"),e._uU(20),e.qZA(),e.qZA()),2&s){const t=e.oxw();e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.action")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-date-require")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.avatar")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-no")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-group-name")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-full-name")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-CMND-CCCD")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-phone-number")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-email")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-rank")," ")}}function Pe(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",10),e._UZ(2,"button",11),e._uU(3," | "),e.TgZ(4,"button",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().doApproveRequestingProfile(r,r.customerNo,"B\u1ea1n mu\u1ed1n x\xe1c nh\u1eadn ng\u01b0\u1eddi n\xe0y?")}),e.qZA(),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td"),e._UZ(9,"img",13),e.qZA(),e.TgZ(10,"td",8),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td",8),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td",9),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.qZA()}if(2&s){const t=c.$implicit,o=e.oxw();e.xp6(2),e.Q6J("label",o._translateService.instant("common.action.edit")),e.xp6(2),e.Q6J("label",o._translateService.instant("common.action.confirm")),e.xp6(2),e.Oqu(e.xi3(7,12,t.createdDate,"dd/MM/yyyy")),e.xp6(3),e.Q6J("src",t.customerAvatar,e.LSH)("alt",t.customerName),e.xp6(2),e.Oqu(t.customerNo),e.xp6(2),e.Oqu(t.groupName),e.xp6(2),e.Oqu(t.customerName),e.xp6(2),e.Oqu(t.customerIdentification),e.xp6(2),e.Oqu(t.customerPhone),e.xp6(2),e.Oqu(t.customerEmail),e.xp6(2),e.Oqu(t.status)}}const Ne=function(){return[5,10,15]};let Ue=(()=>{class s extends A.H{constructor(t,o,n,r,a,l,d,g,h,C,f,p){super(t,o,n,r,a,l,d,g,h),this.dialog=C,this.customerService=f,this._confirmationService=p,this.customerInitialized=!1,this.currentPage={first:0,rows:10,page:0,pageCount:10},this.dtOptions={pagingType:"full_numbers",pageLength:2},this.isCustomerUpdation=!0,this._pageTitle.setTitle(this._translateService.instant("pages.customer.labels.page-title-customer-require-info"))}ngOnInit(){this.initializePage()}initializePage(){this.cols=[{field:"customerNo",header:this._translateService.instant("pages.customer.labels.customer-no"),type:"string"},{field:"groupName",header:this._translateService.instant("pages.customer.labels.customer-group-name"),type:"string"},{field:"customerName",header:this._translateService.instant("pages.customer.labels.customer-full-name"),type:"string"},{field:"customerIdentification",header:this._translateService.instant("pages.customer.labels.customer-CMND-CCCD"),type:"string"},{field:"customerPhone",header:this._translateService.instant("pages.customer.labels.customer-phone-number"),type:"string"},{field:"customerEmail",header:this._translateService.instant("pages.customer.labels.customer-email"),type:"string"},{field:"status",header:this._translateService.instant("pages.customer.labels.status"),type:"status"}],this.getCustomerRequestingList()}getCustomerRequestingList(){var t=this;return(0,D.Z)(function*(){t._common.attachSpinner(),(0,E.D)({response:t.customerService.getCustomerRequestUpdationList({page:t.currentPage.page+1,perPage:t.currentPage.rows,sort:{filedName:"",sortType:"asc|desc"}}),customerInitialized:(0,k.of)(!0)}).pipe((0,L.g)(t.loadingTime)).subscribe(o=>{200===o.response.responseStatus?(t.customerInitialized=o.customerInitialized,t.customerRequestingList=o.response.content.datas.datasList,t.totalRecords=o.response.content.datas.totalDatas,t.pageLinks=Math.round(t.totalRecords/t.currentPage.rows+1),t.presentToast("success",t._translateService.instant(o.response.content.message))):t.presentToast(417===o.response.responseStatus?"warning":"error",t._translateService.instant(o.response.content.message)),t._common.detachSpinner()},o=>{console.log(o),t.presentToast("error",t._translateService.instant("common.errors-message.common-server-error"))})})()}doApproveRequestingProfile(t,o,n){this._confirmationService.confirm({message:n,accept:()=>{var r;const{customerName:a,customerIdentification:l,customerAddress:d,customerBirthday:g,provinceName:h,provinceId:C,companyName:f}=t,p={customerName:a,customerIdentification:l,customerAddress:d,customerBirthday:g,customerProvinceName:h,customerProvinceId:C,companyName:f};console.log("doappro",p),null===(r=this.customerService.approveRequestingProfile(p,o))||void 0===r||r.subscribe(u=>{console.log(u),200===u.responseStatus?(this.presentToast("success",this._translateService.instant(u.content.message)),this.getCustomerRequestingList()):417===u.responseStatus?this.presentToast("warning",this._translateService.instant(u.statusText)):this.presentToast("error",this._translateService.instant(u.content.message))},u=>{console.log(u),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))})}})}deletionRequestingProfile(t,o){this._confirmationService.confirm({message:o,accept:()=>{var n;null===(n=this.customerService.deletionRequestingProfile(t))||void 0===n||n.subscribe(r=>{200===r.responseStatus?this.presentToast("success",this._translateService.instant(r.content.message)):this.presentToast(417==r.responseStatus?"warning":"error",this._translateService.instant(r.statusText))},r=>{this.presentToast("error",this._translateService.instant(r))})}})}saveRequestingProfile(t,o,n){const{customerName:r,customerIdentification:a,customerAddress:l,customerBirthday:d,provinceName:g,provinceId:h,companyName:C}=t,f={customerName:r,customerIdentification:a,customerAddress:l,customerBirthday:d,customerProvinceName:g,customerProvinceId:h,companyName:C};console.log(f),this._confirmationService.confirm({message:n,accept:()=>{var p;null===(p=this.customerService.saveRequestingProfile(f,o))||void 0===p||p.subscribe(u=>{this.presentToast(200===u.responseStatus?"success":417==u.responseStatus?"warning":"error",this._translateService.instant(u.content.message))},u=>{console.error(u),this.presentToast("error",this._translateService.instant(u))})}})}addCustomerRequestingUpdationList(t){console.log("Emit EVent",t),this.customerRequestingList=t,console.log("new Customer",this.customerRequestingList)}getCurrentPage(t){this.currentPage=t}getSelectionData(t){this.listSelect=t}openDialog(t){this.customerService.setCurrentCompany(t),this._dialog.open(J,{header:this._translateService.instant("pages.company.labels.detail-dialog-title"),width:"50vw"})}changeHeaderDialog(t){return this._translateService.instant(1===t?"pages.customer.labels.update-dialog-title-prime":"pages.customer.labels.update-dialog-title-second")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.gz),e.Y36(y.Dx),e.Y36(_.F0),e.Y36(b.uw),e.Y36(S.v),e.Y36(M.w),e.Y36(q._W),e.Y36(w.sK),e.Y36(v.xA),e.Y36(b.uw),e.Y36(N.v),e.Y36(Z.YP))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-customer-requesting-list"]],features:[e._Bn([v.xA]),e.qOj],decls:8,vars:8,consts:[[3,"isCustomerList","isCustomerUpdation","newCustomerRequestingListEvent"],["header","X\xe1c nh\u1eadn th\xf4ng tin kh\xe1ch h\xe0ng","icon","pi pi-exclamation-triangle"],[1,"app-table"],["styleClass","p-datatable-sm p-datatable-gridlines","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","scrollHeight","400px",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","table-caption"],[1,"min-width-210"],[1,"min-width-300"],[1,"flex-center","min-width-210"],["pButton","","pRipple","","type","button",1,"p-button-warning","p-button-text","mr-2",3,"label"],["pButton","","pRipple","","type","button",1,"p-button-success","p-button-text","mr-2",3,"label","click"],[1,"img-width",3,"src","alt"]],template:function(t,o){1&t&&(e.TgZ(0,"app-main-layout"),e.TgZ(1,"app-common-advanced-search",0),e.NdJ("newCustomerRequestingListEvent",function(r){return o.addCustomerRequestingUpdationList(r)}),e.qZA(),e._UZ(2,"p-confirmDialog",1),e.TgZ(3,"div",2),e.TgZ(4,"p-table",3),e.YNc(5,qe,4,1,"ng-template",4),e.YNc(6,we,21,10,"ng-template",5),e.YNc(7,Pe,24,15,"ng-template",6),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("isCustomerList",!1)("isCustomerUpdation",o.isCustomerUpdation),e.xp6(3),e.Q6J("value",o.customerRequestingList)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(7,Ne)))},directives:[B.f,Q,V.Q,R.iA,Z.jx,P.Hq],pipes:[T.uU],styles:[".group-button[_ngcontent-%COMP%]{text-align:right}.create-button[_ngcontent-%COMP%]{background-color:#008cff;color:#fff}.flex-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.img-width[_ngcontent-%COMP%]{max-width:70px;height:auto;object-fit:cover}.custom-plus[_ngcontent-%COMP%]{padding:3px;font-weight:bold;border:2px solid white;border-radius:50%;margin-right:7px}[_nghost-%COMP%]     .p-datatable-table{min-width:1800px}[_nghost-%COMP%]     .p-datatable-table th, [_nghost-%COMP%]     .p-datatable-table td{justify-content:center}.app-table[_ngcontent-%COMP%]{width:100%;height:auto;box-shadow:#959da533 0 8px 24px!important;background-color:#fff!important;margin-top:2rem;padding:5px}.table-caption[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.min-width-210[_ngcontent-%COMP%]{min-width:210px}.min-width-300[_ngcontent-%COMP%]{min-width:300px}"]}),s})();function Ie(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"label",24),e._uU(3),e.qZA(),e.TgZ(4,"input",25),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).customer.companyName=n}),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw(2);e.xp6(3),e.Oqu(t._translateService.instant("pages.customer.labels.customer-authorized-dealer")),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-authorized-dealer"))("ngModel",t.customer.companyName)}}function Fe(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"div",27),e.TgZ(1,"div",28),e.TgZ(2,"div",29),e._UZ(3,"img",30),e.qZA(),e._UZ(4,"div",31),e._UZ(5,"div",32),e.TgZ(6,"div"),e.TgZ(7,"button",33),e.NdJ("click",function(n){return e.CHM(t),e.oxw(3).handleShowFront(n)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw(3);e.xp6(3),e.Q6J("src",t.customer.customerIdentificationFront,e.LSH)}}function Oe(s,c){if(1&s&&e.YNc(0,Fe,8,1,"div",26),2&s){const t=e.oxw(2);e.Q6J("ngIf",!t.currentFileFront)}}function De(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"div",27),e.TgZ(1,"div",28),e.TgZ(2,"div",29),e._UZ(3,"img",30),e.qZA(),e._UZ(4,"div",31),e._UZ(5,"div",32),e.TgZ(6,"div"),e.TgZ(7,"button",33),e.NdJ("click",function(n){return e.CHM(t),e.oxw(3).handleShowBack(n)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw(3);e.xp6(3),e.Q6J("src",t.customer.customerIdentificationBack,e.LSH)}}function Ee(s,c){if(1&s&&e.YNc(0,De,8,1,"div",26),2&s){const t=e.oxw(2);e.Q6J("ngIf",!t.currentFileBack)}}function ke(s,c){if(1&s&&(e.TgZ(0,"div",34),e._UZ(1,"p-button",35),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t._translateService.instant("common.action.add"))("disabled",!t.isDisable())}}function Le(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"p-button",36),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return n.doDelete(n.customer.customerNo)}),e.qZA(),e.TgZ(2,"p-button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateCustomer()}),e.qZA(),e.TgZ(3,"p-button",37),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return n.doVerificationCustomer(n.customer.customerNo,n.customer.status)}),e.qZA(),e.qZA()}if(2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t._translateService.instant("common.action.delete")),e.xp6(1),e.Q6J("label",t._translateService.instant("common.action.temporary-save")),e.xp6(1),e.Q6J("label",t._translateService.instant("common.action.activation-confirm"))}}function Je(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"form",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.TgZ(3,"div",4),e.TgZ(4,"label",5),e._uU(5),e.qZA(),e.TgZ(6,"input",6),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().customer.customerPhone=n}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",3),e.TgZ(8,"div",4),e.TgZ(9,"label",7),e._uU(10),e.qZA(),e.TgZ(11,"input",8),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().customer.customerEmail=n}),e.qZA(),e.TgZ(12,"div"),e._UZ(13,"common-validation-message",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",3),e.TgZ(15,"div",4),e.TgZ(16,"label",10),e._uU(17),e.qZA(),e.TgZ(18,"input",11),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().customer.customerName=n}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",3),e.TgZ(20,"div",4),e.TgZ(21,"label",12),e._uU(22),e.qZA(),e.TgZ(23,"p-calendar",13),e.NdJ("onSelect",function(n){return e.CHM(t),e.oxw().getDate(n)})("ngModelChange",function(n){return e.CHM(t),e.oxw().customerBirthday=n}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",3),e.TgZ(25,"div",4),e.TgZ(26,"label",14),e._uU(27),e.qZA(),e.TgZ(28,"input",15),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().customer.customerIdentification=n}),e.qZA(),e.qZA(),e.qZA(),e.YNc(29,Ie,5,3,"div",16),e.TgZ(30,"div",3),e.TgZ(31,"div",4),e.TgZ(32,"label",17),e._uU(33),e.qZA(),e.TgZ(34,"input",18),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().customer.customerAddress=n}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",3),e.TgZ(36,"div",4),e.TgZ(37,"app-common-citis",19),e.NdJ("currentProvince",function(n){return e.CHM(t),e.oxw().getProvince(n)})("currentSelectedProvince",function(n){return e.CHM(t),e.oxw().getProvinced(n)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",3),e.TgZ(39,"div",4),e.TgZ(40,"label",20),e._uU(41,"CMND/CCCD M\u1eb7t Tr\u01b0\u1edbc"),e.qZA(),e.TgZ(42,"p-fileUpload",21),e.NdJ("customUpload",function(n){return e.CHM(t),e.oxw().onSelectEvent(n)})("onSelect",function(n){return e.CHM(t),e.oxw().onSelectFront(n)})("onRemove",function(n){return e.CHM(t),e.oxw().onRemoveFront(n)}),e.YNc(43,Oe,1,1,"ng-template",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"div",3),e.TgZ(45,"div",4),e.TgZ(46,"label",20),e._uU(47,"CMND/CCCD M\u1eb7t Sau"),e.qZA(),e.TgZ(48,"p-fileUpload",21),e.NdJ("customUpload",function(n){return e.CHM(t),e.oxw().onSelectEvent(n)})("onSelect",function(n){return e.CHM(t),e.oxw().onSelectBack(n)})("onRemove",function(n){return e.CHM(t),e.oxw().onRemoveBack(n)}),e.YNc(49,Ee,1,1,"ng-template",22),e.qZA(),e.qZA(),e.qZA(),e.YNc(50,ke,2,2,"div",23),e.YNc(51,Le,4,3,"div",23),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formGroup",t.customerCreateForm),e.xp6(5),e.Oqu(t._translateService.instant("pages.customer.labels.customer-phone-number")),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-phone-number"))("ngModel",t.customer.customerPhone),e.xp6(4),e.hij("",t._translateService.instant("pages.customer.labels.customer-email")," "),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-email"))("ngModel",t.customer.customerEmail),e.xp6(2),e.Q6J("mainForm",t.customerCreateForm),e.xp6(4),e.hij("",t._translateService.instant("pages.customer.labels.customer-full-name")," "),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-full-name"))("ngModel",t.customer.customerName),e.xp6(4),e.Oqu(t._translateService.instant("pages.customer.labels.customer-date-of-birth")),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-date-of-birth"))("showIcon",!0)("ngModel",t.customerBirthday),e.xp6(4),e.Oqu(t._translateService.instant("pages.customer.labels.customer-CMND-CCCD")),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-CMND-CCCD"))("ngModel",t.customer.customerIdentification),e.xp6(1),e.Q6J("ngIf",1===t.dataGroupId),e.xp6(4),e.Oqu(t._translateService.instant("pages.customer.labels.customer-address")),e.xp6(1),e.Q6J("placeholder",t._translateService.instant("pages.customer.placeholders.customer-address"))("ngModel",t.customer.customerAddress),e.xp6(3),e.Q6J("isCustomerUpdation",t.isCustomerUpdation)("selectedProvince",t.customer.provinceId),e.xp6(5),e.Q6J("multiple",!1)("maxFileSize",5e6)("showUploadButton",!1)("showCancelButton",!1),e.xp6(6),e.Q6J("multiple",!1)("maxFileSize",5e6)("showUploadButton",!1)("showCancelButton",!1),e.xp6(2),e.Q6J("ngIf",!t.isEdit),e.xp6(1),e.Q6J("ngIf",t.isEdit)}}let Ye=(()=>{class s extends A.H{constructor(t,o,n,r,a,l,d,g,h,C,f,p,u,I,H){super(t,o,n,r,a,l,d,h,g),this.customerService=C,this.formBuilder=f,this._ref=p,this.primeConfig=u,this.config=I,this._confirmationService=H,this.isCustomerUpdation=!0,this.activationEmailStatus=!1,this.isEdit=!1}ngOnInit(){this.isEdit=this.config.data.isEdit,this.dataGroupId=this.config.data.groupId,this.customerNo=this.config.data.customerNo,console.log("on init dialog"),document.querySelector(".p-dialog-mask").style.pointerEvents="unset",this.doGetProfileCustomer(this.customerNo).then(o=>{this.currentProvinceId=o.provinceId,this.currentProvinceName=o.provinceName,this.customerImgFront=o.customerIdentificationFront,this.customerImgBack=o.customerIdentificationBack,this.customer=o,console.log(this.customer)}),this._translateService.get("primeng").subscribe(o=>this.primeConfig.setTranslation(o)),this.customerCreateForm=this.formBuilder.group({txtEmail:["",{validators:[i.kI.maxLength(150),i.kI.pattern(x.q.validators.patterns.email),i.kI.required],asyncValidators:[],updateOn:"change"}],txtPhoneNumber:["",{validators:[i.kI.maxLength(150),i.kI.pattern(x.q.validators.patterns.onlyNumeric)],asyncValidators:[],updateOn:"change"}],txtPassword:["",{validators:[i.kI.maxLength(150),i.kI.pattern(x.q.validators.patterns.onlyNumeric)],asyncValidators:[],updateOn:"change"}],txtCompanyName:["",{validators:[i.kI.maxLength(500),i.kI.required],asyncValidators:[],updateOn:"change"}],txtName:["",{validators:[i.kI.maxLength(50),i.kI.required],asyncValidators:[],updateOn:"change"}],txtIdentification:["",{validators:[i.kI.maxLength(150),i.kI.pattern(x.q.validators.patterns.onlyNumeric)],asyncValidators:[],updateOn:"change"}],txtBirthday:["",{validators:[],asyncValidators:[],updateOn:"change"}],txtAddress:["",{validators:[i.kI.maxLength(1e3)],asyncValidators:[],updateOn:"change"}],txtAuthorizedDealer:["",{validators:[i.kI.maxLength(100)],asyncValidators:[],updateOn:"change"}],file:new i.NI("",[i.kI.required])})}get email(){return this.customerCreateForm.get("email")}getDate(t){let o=new Date(Date.parse(t));this.currentBirthday=`${o.getFullYear()}/${o.getMonth()+1}/${o.getDate()}`}getGroup(t){this.currentGroupId=t}getSex(t){this.currentSex=t}getProvince(t){this.currentProvinceId=t.value}getProvinced(t){this.currentProvinceId=t.provinceId,this.currentProvinceName=t.provinceName}isDisable(){return this.customerCreateForm.valid}onSelectEvent(t){console.log(t),this.currentFile=t}identityUpload(t){this.currentFile=t.currentFiles[0]}doVerificationCustomer(t,o,n){var r;console.log("click verify"),this._common.attachSpinner(),null===(r=this.customerService.doVerificationCustomer(t,o))||void 0===r||r.subscribe(a=>{200===a.responseStatus?(this._common.detachSpinner(),this.presentToast("success",this._translateService.instant(a.content.message)),console.log("do verify: ",a)):417===a.responseStatus?(this.presentToast("warning",this._translateService.instant(a.content.message)),this._common.detachSpinner()):(this.presentToast("error",this._translateService.instant(a.content.message)),this._common.detachSpinner())},a=>{console.log(a),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")),this._common.detachSpinner()})}doDelete(t,o){var n;null===(n=this.customerService.doDeleteNewCustomer(t))||void 0===n||n.subscribe(r=>{200===r.responseStatus?(this.presentToast("success",this._translateService.instant(r.content.message)),console.log("delete new customer: ",r)):this.presentToast(417===r.responseStatus?"warning":"error",this._translateService.instant(r.content.message))},r=>{console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))})}doGetProfileCustomer(t){return new Promise((o,n)=>{var r;null===(r=this.customerService.getProfileCustomer(t))||void 0===r||r.subscribe(a=>{200===a.responseStatus?(this.presentToast("success",this._translateService.instant(a.content.message)),this.customer=a.content.datas.customerDetail,this.customerBirthday=new Date(this.customer.customerBirthday),this.checkIfImageExists(this.customer.customerIdentificationFront),this.checkIfImageExists(this.customer.customerIdentificationBack),o(a.content.datas.customerDetail)):417===a.responseStatus?(this.presentToast("warning",this._translateService.instant(a.content.message)),n("Something Wrong")):(console.log(a),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")),n("Something Wrong")),n("Something Wrong")},a=>{console.log(a),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")),n("Something Wrong")})})}updateCustomer(){var t;this.currentBirthday=`${this.customerBirthday.getFullYear()}-${this.customerBirthday.getMonth()+1}-${this.customerBirthday.getDate()}`;let o=new FormData;console.log("id",this.currentProvinceId,this.customer.provinceId),console.log("name",this.currentProvinceName,this.customer.provinceName),console.log(this.currentFileFront,this.customerImgFront),console.log(this.currentFileBack,this.customerImgBack),o.append("customerIdentificationFront",this.currentFileFront||this.customerImgFront),o.append("customerIdentificationBack",this.currentFileBack||this.customerImgBack),o.append("customerPhone",this.customerCreateForm.value.txtPhoneNumber),o.append("customerEmail",this.customerCreateForm.value.txtEmail),o.append("customerName",this.customerCreateForm.value.txtName),o.append("companyName",this.customerCreateForm.value.txtCompanyName),o.append("customerIdentification",this.customerCreateForm.value.txtIdentification),o.append("customerBirthday",this.currentBirthday||this.customerBirthday.toString()),o.append("customerAddress",this.customerCreateForm.value.txtAddress),o.append("customerProvinceId",`${this.currentProvinceId}`),o.append("customerProvinceName",this.currentProvinceName),null===(t=this.customerService.updateNewCustomer(o,this.customerNo))||void 0===t||t.subscribe(n=>{if(n.type!==U.dt.UploadProgress&&n instanceof U.Zn){let r=n.body;console.log(r),200===r.responseStatus?this.presentToast("success",this._translateService.instant(r.content.message)):417===r.responseStatus?this.presentToast("warning",this._translateService.instant(r.content.message)):(console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")))}},n=>{console.log(n),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))})}onSelectFront(t){this.currentFileFront=t.files[0],console.log(this.currentFileFront)}onSelectBack(t){this.currentFileBack=t.files[0],console.log(this.currentFileBack)}handleDeletionRequestingProfile(){this.doDelete(this.customerNo,"B\u1ea1n mu\u1ed1n x\xf3a y\xeau c\u1ea7u c\u1eadp nh\u1eadt th\xf4ng tin c\u1ee7a kh\xe1ch h\xe0ng n\xe0y?")}onRemoveFront(t){this.currentFileFront=this.fileUndefined,console.log(this.currentFileFront)}onRemoveBack(t){this.currentFileBack=this.fileUndefined,console.log(this.currentFileBack)}handleShowFront(t){this.currentFileFront=this.customerImgFront}handleShowBack(t){this.currentFileBack=this.customerImgBack}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.gz),e.Y36(y.Dx),e.Y36(_.F0),e.Y36(b.uw),e.Y36(S.v),e.Y36(M.w),e.Y36(q._W),e.Y36(v.xA),e.Y36(w.sK),e.Y36(N.v),e.Y36(i.qu),e.Y36(v.E7),e.Y36(Z.b4),e.Y36(v.S),e.Y36(Z.YP))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-customer-dialog-content"]],features:[e.qOj],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["for","phoneNumber",1,"form-control-label"],["type","text","id","phoneNumber","formControlName","txtPhoneNumber","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","email",1,"form-control-label"],["type","email","formControlName","txtEmail","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["controllerName","txtEmail","controllerType","textbox","controllerTitle","\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9","maxLength","150",3,"mainForm"],["for","customerName",1,"form-control-label"],["type","text","id","customerName","formControlName","txtName","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","customerBirthday",1,"form-control-label"],["formControlName","txtBirthday","inputId","customerBirthday","dateFormat","dd/mm/yy",3,"placeholder","showIcon","ngModel","onSelect","ngModelChange"],["for","customerIdentification",1,"form-control-label"],["type","text","id","customerIdentification","formControlName","txtIdentification","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["class","col-md-12",4,"ngIf"],["for","customerAddress",1,"form-control-label"],["type","text","id","customerAddress","formControlName","txtAddress","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"isCustomerUpdation","selectedProvince","currentProvince","currentSelectedProvince"],["for","customerIdentificationFront",1,"form-control-label"],["name","docs[]","accept","image/*","invalidFileSizeMessageSummary","{0}: K\xedch th\u01b0\u1edbc t\u1ec7p kh\xf4ng h\u1ee3p l\u1ec7","invalidFileSizeMessageDetail","K\xedch th\u01b0\u1edbc t\u1ec7p t\u1ea3i l\xean t\u1ed1i \u0111a l\xe0 {0}.","chooseLabel","C\u1eadp nh\u1eadt \u1ea3nh","uploadLabel","T\u1ea3i l\xean","cancelLabel","H\u1ee7y",3,"multiple","maxFileSize","showUploadButton","showCancelButton","customUpload","onSelect","onRemove"],["pTemplate","content"],["class","p-dialog-footer button-create col-md-12",4,"ngIf"],["for","customerAuthorizedDealer",1,"form-control-label"],["type","text","id","customerAuthorizedDealer","formControlName","txtAuthorizedDealer","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["class","p-fileupload-files",4,"ngIf"],[1,"p-fileupload-files"],[1,"p-fileupload-row"],[1,"-size-img"],["alt","Image",3,"src"],[1,"p-fileupload-filename"],[1,"p-fileupload-filesize"],["pButton","","type","button","icon","pi pi-times",1,"p-button-text",3,"click"],[1,"p-dialog-footer","button-create","col-md-12"],["styleClass","p-button-text p-button-primary","icon","pi pi-plus",3,"label","disabled"],["styleClass","p-button-text p-button-primary",1,"float-start","ms-2",3,"label","click"],["styleClass","p-button-text p-button-primary",3,"label","click"]],template:function(t,o){1&t&&e.YNc(0,Je,52,34,"form",0),2&t&&e.Q6J("ngIf",o.customer)},directives:[T.O5,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,F.C,G.f,Y.$,O.p,Z.jx,P.Hq,P.zx],styles:["span[_ngcontent-%COMP%]{color:#dc3545}.badge[_ngcontent-%COMP%]{height:35px;padding-top:10px;background-color:#d7edff;border:1px solid #51acf6}.badge-secondary[_ngcontent-%COMP%]{color:#008cff}.row[_ngcontent-%COMP%]{margin-top:15px}.group-button[_ngcontent-%COMP%]{text-align:right}.button-create[_ngcontent-%COMP%]{padding:1rem 0 0}.activation-email[_ngcontent-%COMP%]{padding-top:1.5rem}[_nghost-%COMP%]     .p-inputmask{width:100%;height:40px;border-radius:8px}[_nghost-%COMP%]     .p-dialog-mask{background-color:#a9a99f;pointer-events:unset!important}[_nghost-%COMP%]     .p-calendar-w-btn .p-inputtext{border-radius:8px 0 0 8px}[_nghost-%COMP%]     .p-calendar-w-btn .p-datepicker-trigger{border-radius:0 8px 8px 0}[_nghost-%COMP%]     .p-calendar{width:100%;height:38px;border-radius:8px}[_nghost-%COMP%]     .p-button-text{background-color:#008cff;color:#fff;border-color:#0000}[_nghost-%COMP%]     .p-datepicker td>span{display:initial;font-size:15px}[_nghost-%COMP%]     .ui-datepicker .ui-widget{font-size:20px}[_nghost-%COMP%]     .p-datepicker{z-index:1003!important;transform-origin:center top!important;left:-1px!important;top:-90px!important}[_nghost-%COMP%]     .p-button.btn-update, [_nghost-%COMP%]     .p-button.btn-update .p-button{padding:2px}[_nghost-%COMP%]     .pointer-unset{pointer-events:unset!important}.-size-img[_ngcontent-%COMP%]{display:inline-block;width:50px;height:inherit}.-size-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:auto;object-fit:cover}"]}),s})();function Be(s,c){if(1&s&&(e.TgZ(0,"div",7),e.TgZ(1,"h5"),e._uU(2),e.qZA(),e._UZ(3,"span"),e.qZA()),2&s){const t=e.oxw(2);e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.table-title")," ")}}function Qe(s,c){if(1&s&&(e.TgZ(0,"tr"),e.TgZ(1,"th",8),e._uU(2),e.qZA(),e.TgZ(3,"th",9),e._uU(4,"Ng\xe0y \u0110\u0103ng K\xfd"),e.qZA(),e.TgZ(5,"th",10),e._uU(6),e.qZA(),e.TgZ(7,"th",11),e._uU(8),e.qZA(),e.TgZ(9,"th",12),e._uU(10),e.qZA(),e.TgZ(11,"th",13),e._uU(12),e.qZA(),e.TgZ(13,"th",14),e._uU(14),e.qZA(),e.TgZ(15,"th",15),e._uU(16),e.qZA(),e.TgZ(17,"th",16),e._uU(18),e.qZA(),e.qZA()),2&s){const t=e.oxw(2);e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.action")," "),e.xp6(4),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-no")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-group-name")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-full-name")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-CMND-CCCD")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-phone-number")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-email")," "),e.xp6(2),e.hij(" ",t._translateService.instant("pages.customer.labels.customer-rank")," ")}}function Re(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",17),e.TgZ(2,"button",18),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).showModalDialog(r.customerNo,r.groupId)}),e.qZA(),e._uU(3," | "),e.TgZ(4,"button",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).doVerificationCustomer(r.customerNo,r.status)}),e.qZA(),e.qZA(),e.TgZ(5,"td",9),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td",10),e._uU(9),e.qZA(),e.TgZ(10,"td",11),e._uU(11),e.qZA(),e.TgZ(12,"td",12),e._uU(13),e.qZA(),e.TgZ(14,"td",13),e._uU(15),e.qZA(),e.TgZ(16,"td",14),e._uU(17),e.qZA(),e.TgZ(18,"td",15),e._uU(19),e.qZA(),e.TgZ(20,"td",16),e._uU(21),e.qZA(),e.qZA()}if(2&s){const t=c.$implicit,o=e.oxw(2);e.xp6(2),e.Q6J("label",o._translateService.instant("common.action.edit")),e.xp6(2),e.Q6J("label",o._translateService.instant("common.action.confirm")),e.xp6(2),e.hij(" ",e.xi3(7,10,t.createdDate,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",t.customerNo," "),e.xp6(2),e.hij(" ",t.groupName," "),e.xp6(2),e.hij(" ",t.customerName," "),e.xp6(2),e.hij(" ",t.customerIdentification," "),e.xp6(2),e.hij(" ",t.customerPhone," "),e.xp6(2),e.hij(" ",t.customerEmail," "),e.xp6(2),e.hij(" ",t.membershipId," ")}}const He=function(){return[5,10,15]};function je(s,c){if(1&s&&(e.TgZ(0,"div",2),e.TgZ(1,"p-table",3),e.YNc(2,Be,4,1,"ng-template",4),e.YNc(3,Qe,19,8,"ng-template",5),e.YNc(4,Re,22,13,"ng-template",6),e.qZA(),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("value",t.customerList)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(5,He))}}const ze=[{path:"",component:Me,data:{listLabel:"Danh s\xe1ch kh\xe1ch h\xe0ng"}},{path:"requesting",component:Ue,data:{listLabel:"Danh s\xe1ch kh\xe1ch h\xe0ng y\xeau c\u1ea7u c\u1eadp nh\u1eadt th\xf4ng tin"}},{path:"new",component:(()=>{class s extends A.H{constructor(t,o,n,r,a,l,d,g,h,C,f,p){super(t,o,n,r,a,l,d,g,h),this.dialog=C,this.customerService=f,this._confirmationService=p,this.customerInitialized=!1,this.currentPage={first:0,rows:10,page:0,pageCount:10},this.dtOptions={pagingType:"full_numbers",pageLength:2},this._pageTitle.setTitle(this._translateService.instant("pages.customer.labels.page-title-new-customer"))}ngOnInit(){this.initializePage()}initializePage(){this.getNewCustomerList()}getNewCustomerList(){var t=this;return(0,D.Z)(function*(){t._common.attachSpinner(),(0,E.D)({response:t.customerService.getNewCustomerList({page:t.currentPage.page+1,perPage:t.currentPage.rows,sort:{filedName:"",sortType:"asc|desc"}}),customerInitialized:(0,k.of)(!0)}).pipe((0,L.g)(t.loadingTime)).subscribe(o=>{200===o.response.responseStatus?(t.customerInitialized=o.customerInitialized,t.customerList=o.response.content.datas.datasList,t.totalRecords=o.response.content.datas.totalDatas,t.pageLinks=Math.round(t.totalRecords/t.currentPage.rows+1),t.presentToast("success",t._translateService.instant(o.response.content.message))):t.presentToast(417===o.response.responseStatus?"warning":"error",t._translateService.instant(o.response.content.message)),t._common.detachSpinner()},o=>{console.log(o),t.presentToast("error",t._translateService.instant("common.errors-message.common-server-error"))})})()}getCurrentPage(t){this.currentPage=t}getSelectionData(t){this.listSelect=t}openDialog(t){this.customerService.setCurrentCompany(t),this._dialog.open(J,{header:this._translateService.instant("pages.company.labels.detail-dialog-title"),width:"50vw"})}showModalDialog(t,o){this._dialog.open(Ye,{header:this.changeHeaderDialog(o),width:"40vw",data:{isEdit:!0,customerNo:t,groupId:o}}).onClose.subscribe(r=>this.getNewCustomerList())}changeHeaderDialog(t){return this._translateService.instant(1===t?"pages.customer.labels.update-dialog-title-prime":"pages.customer.labels.update-dialog-title-second")}receiveSearch(t){this.customerList=t}doVerificationCustomer(t,o,n){var r;console.log("click verify"),this._common.attachSpinner(),null===(r=this.customerService.doVerificationCustomer(t,o))||void 0===r||r.subscribe(a=>{200===a.responseStatus?(this._common.detachSpinner(),this.presentToast("success",this._translateService.instant(a.content.message)),console.log("verified"),console.log("do verify: ",a),this.getNewCustomerList()):417===a.responseStatus?(this.presentToast("warning",this._translateService.instant(a.content.message)),this._common.detachSpinner()):(this.presentToast("error",this._translateService.instant(a.content.message)),this._common.detachSpinner())},a=>{console.log(a),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")),this._common.detachSpinner()})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.gz),e.Y36(y.Dx),e.Y36(_.F0),e.Y36(b.uw),e.Y36(S.v),e.Y36(M.w),e.Y36(q._W),e.Y36(w.sK),e.Y36(v.xA),e.Y36(b.uw),e.Y36(N.v),e.Y36(Z.YP))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-customer-new"]],features:[e._Bn([v.xA]),e.qOj],decls:3,vars:3,consts:[[3,"isCustomerList","isCustomerNewList","searchEvent"],["class","app-table mt-5",4,"ngIf"],[1,"app-table","mt-5"],["styleClass","p-datatable-sm p-datatable-gridlines","responsiveLayout","scroll","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","scrollHeight","400px",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","table-caption"],[1,"column-1"],[1,"column-2"],[1,"column-3"],[1,"column-4"],[1,"column-5"],[1,"column-6"],[1,"column-7"],[1,"column-8"],[1,"column-9"],[1,"app-table-action","column-1"],["pButton","","pRipple","","type","button",1,"p-button-warning","p-button-text","mr-2",3,"label","click"],["pButton","","pRipple","","type","button",1,"p-button-success","p-button-text","mr-2",3,"label","click"]],template:function(t,o){1&t&&(e.TgZ(0,"app-main-layout"),e.TgZ(1,"app-common-advanced-search",0),e.NdJ("searchEvent",function(r){return o.receiveSearch(r)}),e.qZA(),e.YNc(2,je,5,6,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("isCustomerList",!1)("isCustomerNewList",!0),e.xp6(1),e.Q6J("ngIf",o.customerList))},directives:[B.f,Q,T.O5,R.iA,Z.jx,P.Hq],pipes:[T.uU],styles:[".group-button[_ngcontent-%COMP%]{text-align:right}.create-button[_ngcontent-%COMP%]{background-color:#008cff;color:#fff}.custom-plus[_ngcontent-%COMP%]{padding:3px;font-weight:bold;border:2px solid white;border-radius:50%;margin-right:7px}.form[_ngcontent-%COMP%]{width:100%;height:auto;background-color:#fff;border:1px solid lightgrey;border-radius:20px;margin-top:2rem}.form[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:1rem 0 0 1rem}.form[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{justify-content:center;padding:0 2rem}[_nghost-%COMP%]     .p-button-text{width:120px;background-color:#008cff;color:#fff;border-color:#0000;text-align:center}.input-cate-account[_ngcontent-%COMP%]{margin-right:auto}.app-table[_ngcontent-%COMP%]{width:100%;height:auto;box-shadow:#959da533 0 8px 24px!important;background-color:#fff!important;margin-top:2rem;padding:5px}.app-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .app-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{justify-content:center}.app-table[_ngcontent-%COMP%]   .column-1[_ngcontent-%COMP%]{min-width:260px}.app-table[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]{min-width:150px}.app-table[_ngcontent-%COMP%]   .column-3[_ngcontent-%COMP%]{min-width:220px}.app-table[_ngcontent-%COMP%]   .column-4[_ngcontent-%COMP%]{min-width:120px}.app-table[_ngcontent-%COMP%]   .column-5[_ngcontent-%COMP%]{min-width:170px}.app-table[_ngcontent-%COMP%]   .column-6[_ngcontent-%COMP%]{min-width:170px}.app-table[_ngcontent-%COMP%]   .column-7[_ngcontent-%COMP%]{min-width:170px}.app-table[_ngcontent-%COMP%]   .column-8[_ngcontent-%COMP%]{min-width:280px}.app-table[_ngcontent-%COMP%]   .column-9[_ngcontent-%COMP%]{min-width:150px}.table-caption[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.btn-search[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}"]}),s})(),data:{listLabel:"Danh s\xe1ch kh\xe1ch h\xe0ng m\u1edbi"}}];let Ge=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[_.Bz.forChild(ze)],_.Bz]}),s})(),Ve=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[T.ez,Ge,$.Y,K.lN,W.c,X.Nh,z.zz,v.DL,O.O,U.JF,i.u5,i.UX]]}),s})()}}]);