"use strict";(self.webpackChunkcom_skyfiresolution_tokunabi_admin=self.webpackChunkcom_skyfiresolution_tokunabi_admin||[]).push([[744],{1744:(me,R,c)=>{c.r(R),c.d(R,{LoyaltyModule:()=>de});var C=c(8583),p=c(4655),E=c(8239),A=c(2587),I=c(5758),et=c(5917),G=c(1289),a=c(3679),y=c(7624),t=c(7716),P=c(9075),q=c(2238),M=c(272),L=c(4003),U=c(9344),f=c(9451),Z=c(9790),k=c(2541),x=c(3013),H=c(8032),Y=c(6543),b=c(4207);let nt=(()=>{class o extends A.H{constructor(e,n,i,r,l,d,g,m,u,h,_,v,S,w,j){super(e,n,i,r,l,d,g,u,m),this.customerService=h,this.formBuilder=_,this._ref=v,this.primeConfig=S,this.config=w,this._confirmationService=j,this.isCustomerUpdation=!0,this.isEdit=!1}ngOnInit(){this.isEdit=this.config.data.isEdit,this.dataGroupId=this.config.data.groupId,this.customerNo=this.config.data.customerNo,document.querySelector(".p-dialog-mask").style.pointerEvents="unset",this._translateService.get("primeng").subscribe(n=>this.primeConfig.setTranslation(n)),this.customerCreateForm=this.formBuilder.group({txtPhoneNumber:["",{validators:[a.kI.maxLength(150),a.kI.pattern(y.q.validators.patterns.onlyNumeric)],asyncValidators:[],updateOn:"change"}],txtAddress:["",{validators:[a.kI.maxLength(1e3)],asyncValidators:[],updateOn:"change"}]})}getProvince(e){this.currentProvinceId=e.value}getProvinced(e){this.currentProvinceId=e.provinceId,this.currentProvinceName=e.provinceName}isDisable(){return this.customerCreateForm.valid}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.gz),t.Y36(P.Dx),t.Y36(p.F0),t.Y36(q.uw),t.Y36(M.v),t.Y36(L.w),t.Y36(U._W),t.Y36(f.xA),t.Y36(Z.sK),t.Y36(k.v),t.Y36(a.qu),t.Y36(f.E7),t.Y36(x.b4),t.Y36(f.S),t.Y36(x.YP))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-loyalty-gift-exchange-update"]],features:[t.qOj],decls:22,vars:5,consts:[[1,"row"],[1,"col-md-12"],[1,"form-group"],["for","phoneNumber",1,"form-control-label"],["type","text","id","phoneNumber","formControlName","txtPhoneNumber","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder"],["for","customerAddress",1,"form-control-label"],["type","text","id","customerAddress","formControlName","txtAddress","spellcheck","false","autocorrect","false","autocomplete","false","autofocus","false",1,"form-control",3,"placeholder"],[1,"text-area"],["rows","3","cols","30","pInputTextarea","","placeholder","Ghi ch\xfa th\xf4ng tin nh\u1eadn qu\xe0"],[1,"group-button"],["styleClass","p-button-text p-button-primary",1,"float-end","ms-2",3,"label"]],template:function(e,n){1&e&&(t.TgZ(0,"form"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t.TgZ(4,"label",3),t._uU(5),t.qZA(),t._UZ(6,"input",4),t.qZA(),t.qZA(),t.TgZ(7,"div",1),t.TgZ(8,"div",2),t.TgZ(9,"label",5),t._uU(10),t.qZA(),t._UZ(11,"input",6),t.qZA(),t.qZA(),t.TgZ(12,"div",1),t.TgZ(13,"div",2),t._UZ(14,"app-common-citis"),t.qZA(),t.qZA(),t.TgZ(15,"div",1),t.TgZ(16,"div",2),t.TgZ(17,"p",7),t._uU(18,"Ghi Ch\xfa"),t.qZA(),t._UZ(19,"textarea",8),t.qZA(),t.qZA(),t.TgZ(20,"div",9),t._UZ(21,"p-button",10),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Oqu(n._translateService.instant("pages.customer.labels.customer-phone-number")),t.xp6(1),t.Q6J("placeholder",n._translateService.instant("pages.customer.placeholders.customer-phone-number")),t.xp6(4),t.Oqu(n._translateService.instant("pages.customer.labels.customer-address")),t.xp6(1),t.Q6J("placeholder",n._translateService.instant("pages.customer.placeholders.customer-address")),t.xp6(10),t.Q6J("label",n._translateService.instant("common.action.save")))},directives:[a._Y,a.JL,a.F,a.Fj,a.JJ,a.u,H.$,Y.g,b.zx],styles:["span[_ngcontent-%COMP%]{color:#dc3545}.badge[_ngcontent-%COMP%]{height:35px;padding-top:10px;background-color:#d7edff;border:1px solid #51acf6}.badge-secondary[_ngcontent-%COMP%]{color:#008cff}.row[_ngcontent-%COMP%]{margin-top:15px}.group-button[_ngcontent-%COMP%]{text-align:right}.button-create[_ngcontent-%COMP%]{padding:1rem 0 0}.activation-email[_ngcontent-%COMP%]{padding-top:1.5rem}[_nghost-%COMP%]     .p-inputmask{width:100%;height:40px;border-radius:8px}[_nghost-%COMP%]     .p-dialog-mask{background-color:#a9a99f;pointer-events:unset!important}[_nghost-%COMP%]     .p-calendar-w-btn .p-inputtext{border-radius:8px 0 0 8px}[_nghost-%COMP%]     .p-calendar-w-btn .p-datepicker-trigger{border-radius:0 8px 8px 0}[_nghost-%COMP%]     .p-calendar{width:100%;height:38px;border-radius:8px}[_nghost-%COMP%]     .p-button-text{background-color:#008cff;color:#fff;border-color:#0000}[_nghost-%COMP%]     .p-datepicker td>span{display:initial;font-size:15px}[_nghost-%COMP%]     .ui-datepicker .ui-widget{font-size:20px}[_nghost-%COMP%]     .p-datepicker{z-index:1003!important;transform-origin:center top!important;left:-1px!important;top:-90px!important}[_nghost-%COMP%]     .p-button.btn-update, [_nghost-%COMP%]     .p-button.btn-update .p-button{padding:2px}[_nghost-%COMP%]     .pointer-unset{pointer-events:unset!important}.-size-img[_ngcontent-%COMP%]{display:inline-block;width:50px;height:inherit}.-size-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:auto;object-fit:cover}textarea[_ngcontent-%COMP%]{width:100%;border-radius:10px}.text-area[_ngcontent-%COMP%]{font-size:13px;font-weight:bold}"]}),o})();var B=c(5136),T=c(6869),z=c(8287),$=c(6255);const V=`${y.q.host}${y.q.endpoint.systemEndpoint.exchangeGiftEndpoint}`;let K=(()=>{class o extends B.b{constructor(e,n,i){super(e,n,i)}getListExchangeGift(e){try{return this._httpUtil.doPost(`${V}${T.c.exchange_gift_list}`,e)}catch(n){return console.error(n),null}}advancedSearchGiftExchange(e){try{let i=`${V}${T.c.loyalty_membership_gift_list}`;return console.log("searchGiftExchange",e),this._httpUtil.doPost(i,e)}catch(n){return null}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(z.y),t.LFG($.m),t.LFG(Z.sK))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var F=c(2111),ot=c(4080);let it=(()=>{class o extends A.H{constructor(e,n,i,r,l,d,g,m,u,h,_,v,S,w){super(e,n,i,r,l,d,g,u,m),this.formBuilder=h,this.primeConfig=_,this.customerService=v,this._ref=S,this.giftExchangeSearch=w,this.isCustomerList=!0,this.isCustomerNewList=!1,this.newCustomerRequestingListEvent=new t.vpe,this.searchEvent=new t.vpe,this.currentPage={first:0,rows:10,page:0,pageCount:10}}ngOnInit(){this._translateService.get("primeng").subscribe(e=>this.primeConfig.setTranslation(e)),this.customerSearch=this.formBuilder.group({txtPhoneNumber:["",{validators:[a.kI.maxLength(12),a.kI.minLength(8),a.kI.pattern(y.q.validators.patterns.onlyNumeric)],asyncValidators:[],updateOn:"change"}],txtCustomerNo:["",{validators:[a.kI.maxLength(18)],asyncValidators:[],updateOn:"change"}],txtAddress:["",{validators:[a.kI.maxLength(1e3)],asyncValidators:[],updateOn:"change"}]})}searchGiftExchange(){var e,n;const i={page:this.currentPages,recipientPhone:this.customerSearch.value.txtPhoneNumber,customerNo:this.customerSearch.value.txtCustomerNo,recipientAddress:this.customerSearch.value.txtAddress,recipientProvinceId:null===(e=this.currentProvince)||void 0===e?void 0:e.provinceId};console.log("newGiftExchange: ",i),null===(n=this.giftExchangeSearch.advancedSearchGiftExchange(i))||void 0===n||n.subscribe(r=>{200===r.responseStatus?(this.presentToast("success",this._translateService.instant(r.content.message)),this.searchEvent.emit(r.content.datas.datasList),this._ref.close()):417===r.responseStatus?this.presentToast("warning",this._translateService.instant(r.content.message)):(console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")))},r=>{console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))})}getProvinces(e){console.log(e),this.currentProvinceId=e.value}getProvinced(e){console.log(e),this.currentProvince=e}isDisable(){return this.customerSearch.valid}getProvince(e){this.currentProvince=e.value}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.gz),t.Y36(P.Dx),t.Y36(p.F0),t.Y36(q.uw),t.Y36(M.v),t.Y36(L.w),t.Y36(U._W),t.Y36(f.xA),t.Y36(Z.sK),t.Y36(a.qu),t.Y36(x.b4),t.Y36(k.v),t.Y36(f.E7),t.Y36(K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-loyalty-gift-exchange-advanced-search"]],inputs:{isCustomerList:"isCustomerList",isCustomerNewList:"isCustomerNewList",isCustomerUpdation:"isCustomerUpdation"},outputs:{newCustomerRequestingListEvent:"newCustomerRequestingListEvent",searchEvent:"searchEvent"},features:[t.qOj],decls:28,vars:15,consts:[[1,"form",3,"formGroup"],[1,"row","input-field"],[1,"col-md-6"],[1,"form-group"],["for","customerNo",1,"form-control-label"],["type","text","id","customerNo","formControlName","txtCustomerNo",1,"form-control",3,"placeholder"],["controllerName","txtCustomerNo","controllerType","textbox","maxLength","18",3,"mainForm","controllerTitle"],["for","customerPhone",1,"form-control-label"],["type","text","id","customerPhone","formControlName","txtPhoneNumber",1,"form-control",3,"placeholder"],["controllerName","txtPhoneNumber","controllerType","textbox","maxLength","12","minLength","8",3,"mainForm","controllerTitle"],["for","customerAddress",1,"form-control-label"],["type","text","id","customerAddress","formControlName","txtAddress",1,"form-control",3,"placeholder"],["controllerName","txtAddress","controllerType","textbox","maxLength","1000",3,"mainForm","controllerTitle"],[3,"isCustomerUpdation","currentProvince","currentProvinces","currentSelectedProvince"],[1,"col-md-6","flex","btn-search"],["pButton","","type","button","label","L\u1ecdc Danh S\xe1ch",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"h5"),t._uU(2),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",1),t.TgZ(5,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"label",4),t._uU(8),t.qZA(),t._UZ(9,"input",5),t._UZ(10,"common-validation-message",6),t.qZA(),t.qZA(),t.TgZ(11,"div",2),t.TgZ(12,"div",3),t.TgZ(13,"label",7),t._uU(14),t.qZA(),t._UZ(15,"input",8),t._UZ(16,"common-validation-message",9),t.qZA(),t.qZA(),t.TgZ(17,"div",2),t.TgZ(18,"div",3),t.TgZ(19,"label",10),t._uU(20),t.qZA(),t._UZ(21,"input",11),t._UZ(22,"common-validation-message",12),t.qZA(),t.qZA(),t.TgZ(23,"div",2),t.TgZ(24,"div",3),t.TgZ(25,"app-common-citis",13),t.NdJ("currentProvince",function(r){return n.getProvince(r)})("currentProvinces",function(r){return n.getProvinces(r)})("currentSelectedProvince",function(r){return n.getProvinced(r)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",14),t.TgZ(27,"button",15),t.NdJ("click",function(){return n.searchGiftExchange()}),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.customerSearch),t.xp6(2),t.hij(" ",n._translateService.instant("common.form.title.advanced-search")," "),t.xp6(6),t.hij("",n._translateService.instant("pages.customer.labels.customer-no"),": "),t.xp6(1),t.Q6J("placeholder",n._translateService.instant("pages.customer.placeholders.customer-number-of-employees")),t.xp6(1),t.Q6J("mainForm",n.customerSearch)("controllerTitle",n._translateService.instant("pages.customer.labels.customer-no")),t.xp6(4),t.hij("",n._translateService.instant("pages.customer.labels.customer-phone-number"),": "),t.xp6(1),t.Q6J("placeholder",n._translateService.instant("pages.customer.placeholders.customer-phone-number")),t.xp6(1),t.Q6J("mainForm",n.customerSearch)("controllerTitle",n._translateService.instant("pages.customer.labels.customer-phone-number")),t.xp6(4),t.hij("",n._translateService.instant("pages.customer.labels.customer-address"),":"),t.xp6(1),t.Q6J("placeholder",n._translateService.instant("pages.customer.placeholders.customer-address")),t.xp6(1),t.Q6J("mainForm",n.customerSearch)("controllerTitle",n._translateService.instant("pages.customer.labels.customer-address")),t.xp6(3),t.Q6J("isCustomerUpdation",n.isCustomerUpdation))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,ot.C,H.$,b.Hq],styles:[".form[_ngcontent-%COMP%]{width:100%;height:auto;background-color:#fff;border:1px solid lightgrey;border-radius:20px;margin-top:2rem}.form[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:1rem 0 0 1rem}.form[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{justify-content:flex-end;padding:0 2rem}[_nghost-%COMP%]     .p-button-text{width:120px;background-color:#008cff;color:#fff;border-color:#0000;text-align:center}.btn-search[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;margin:.75rem 0}.form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #a6d5fa;border-color:#2196f3}"]}),o})();var J=c(464);function rt(o,s){if(1&o&&(t.TgZ(0,"div",7),t.TgZ(1,"h5"),t._uU(2),t.qZA(),t._UZ(3,"span"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",e._translateService.instant("pages.customer.labels.table-title")," ")}}function at(o,s){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"th",8),t._uU(2,"H\xe0nh \u0110\u1ed9ng"),t.qZA(),t.TgZ(3,"th",9),t._uU(4,"V\u1eadn Chuy\u1ec3n"),t.qZA(),t.TgZ(5,"th",10),t._uU(6,"M\xe3 Kh\xe1ch H\xe0ng"),t.qZA(),t.TgZ(7,"th",11),t._uU(8,"H\u1ecd v\xe0 T\xean"),t.qZA(),t.TgZ(9,"th",12),t._uU(10,"S\u1ed1 \u0110i\u1ec7n Tho\u1ea1i"),t.qZA(),t.TgZ(11,"th",13),t._uU(12,"\u0110\u1ecba Ch\u1ec9"),t.qZA(),t.TgZ(13,"th",14),t._uU(14,"T\u1ec9nh Th\xe0nh"),t.qZA(),t.TgZ(15,"th",15),t._uU(16,"Icon"),t.qZA(),t.TgZ(17,"th",16),t._uU(18,"T\xean Qu\xe0"),t.qZA(),t.TgZ(19,"th",17),t._uU(20,"Ng\xe0y \u0110\u1ed5i Qu\xe0"),t.qZA(),t.TgZ(21,"th",18),t._uU(22,"Ghi Ch\xfa"),t.qZA(),t.qZA())}function st(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",19),t.TgZ(2,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).openGiftExchange()}),t.qZA(),t._uU(3," | "),t._UZ(4,"button",21),t.qZA(),t.TgZ(5,"td",9),t._uU(6),t.qZA(),t.TgZ(7,"td",22),t._uU(8),t.qZA(),t.TgZ(9,"td",11),t._uU(10),t.qZA(),t.TgZ(11,"td",12),t._uU(12),t.qZA(),t.TgZ(13,"td",13),t._uU(14),t.qZA(),t.TgZ(15,"td",14),t._uU(16),t.qZA(),t.TgZ(17,"td",15),t._UZ(18,"img",23),t.qZA(),t.TgZ(19,"td",16),t._uU(20),t.qZA(),t.TgZ(21,"td",17),t._uU(22),t.ALo(23,"date"),t.qZA(),t.TgZ(24,"td",18),t._uU(25),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(6),t.hij(" ",e.exchange_status," "),t.xp6(2),t.hij(" ",e.customer_no," "),t.xp6(2),t.hij(" ",e.customer_name," "),t.xp6(2),t.hij(" ",e.customer_phone," "),t.xp6(2),t.hij(" ",e.recipient_address," "),t.xp6(2),t.hij(" ",e.recipient_province_name," "),t.xp6(2),t.s9C("src",e.gift_icon,t.LSH),t.xp6(2),t.hij(" ",e.gift_title," "),t.xp6(2),t.hij(" ",t.xi3(23,10,e.exchange_date,"dd/MM/yyyy")," "),t.xp6(3),t.hij(" ",e.exchange_note," ")}}const lt=function(){return[5,10,15]};function ct(o,s){if(1&o&&(t.TgZ(0,"div",2),t.TgZ(1,"p-table",3),t.YNc(2,rt,4,1,"ng-template",4),t.YNc(3,at,23,0,"ng-template",5),t.YNc(4,st,26,13,"ng-template",6),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("value",e.giftExchangeList)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(5,lt))}}let pt=(()=>{class o extends A.H{constructor(e,n,i,r,l,d,g,m,u,h,_,v){super(e,n,i,r,l,d,g,m,u),this.dialog=h,this.exchangeGiftService=_,this._confirmationService=v,this.exchangeGiftInitialized=!1,this.currentPage={first:0,rows:10,page:0,pageCount:10},this._pageTitle.setTitle(this._translateService.instant("pages.customer.labels.page-title"))}ngOnInit(){this.initializePage()}initializePage(){this.cols=[{field:"status",header:this._translateService.instant("pages.customer.labels.status"),type:"exchange_status"}],this.getExchangeGiftList()}getExchangeGiftList(){var e=this;return(0,E.Z)(function*(){e._common.attachSpinner(),(0,I.D)({response:e.exchangeGiftService.getListExchangeGift({page:e.currentPage.page+1,perPage:e.currentPage.rows,sort:{filedName:"",sortType:"asc|desc"}}),exchangeGiftInitialized:(0,et.of)(!0)}).pipe((0,G.g)(e.loadingTime)).subscribe(n=>{200===n.response.responseStatus?(e.giftExchangeList=n.response.content.datas.datasList,e.totalRecords=n.response.content.datas.totalDatas,e.pageLinks=Math.round(e.totalRecords/e.currentPage.rows+1),e.presentToast("success",e._translateService.instant(n.response.content.message))):e.presentToast(417===n.response.responseStatus?"warning":"error",e._translateService.instant(n.response.content.message)),e._common.detachSpinner()},n=>{console.log(n),e.presentToast("error",e._translateService.instant("common.errors-message.common-server-error"))})})()}openGiftExchange(){this._dialog.open(nt,{header:"S\u1eeda Th\xf4ng Tin Nh\u1eadn Qu\xe0",width:"45vw"})}receiveSearch(e){this.giftExchangeList=e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.gz),t.Y36(P.Dx),t.Y36(p.F0),t.Y36(q.uw),t.Y36(M.v),t.Y36(L.w),t.Y36(U._W),t.Y36(Z.sK),t.Y36(f.xA),t.Y36(q.uw),t.Y36(K),t.Y36(x.YP))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-loyalty-gift-exchange"]],inputs:{cols:"cols"},features:[t.qOj],decls:3,vars:1,consts:[[3,"searchEvent"],["class","app-table mt-5",4,"ngIf"],[1,"app-table","mt-5"],["styleClass","p-datatable-sm p-datatable-gridlines","responsiveLayout","scroll","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","scrollHeight","400px",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","table-caption"],[1,"column-1"],[1,"column-2"],[1,"column-3"],[1,"column-4"],[1,"column-5"],[1,"column-6"],[1,"column-7"],[1,"column-8"],[1,"column-9"],[1,"column-10"],[1,"column-11"],[1,"app-table-action","column-1"],["pButton","","pRipple","","type","button","label","S\u1eeda",1,"p-button-success","p-button-text","mr-2",3,"click"],["pButton","","pRipple","","type","button","label","H\u1ee7y",1,"p-button-warning","p-button-text","mr-2"],[1,"column-3","customer-no"],["alt","gift icon","width","50px","height","50px",1,"avatar",3,"src"]],template:function(e,n){1&e&&(t.TgZ(0,"app-main-layout"),t.TgZ(1,"app-loyalty-gift-exchange-advanced-search",0),t.NdJ("searchEvent",function(r){return n.receiveSearch(r)}),t.qZA(),t.YNc(2,ct,5,6,"div",1),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",n.giftExchangeList))},directives:[F.f,it,C.O5,J.iA,x.jx,b.Hq],pipes:[C.uU],styles:[".group-button[_ngcontent-%COMP%]{text-align:right}.create-button[_ngcontent-%COMP%]{background-color:#008cff;color:#fff}.custom-plus[_ngcontent-%COMP%]{padding:3px;font-weight:bold;border:2px solid white;border-radius:50%;margin-right:7px}.form[_ngcontent-%COMP%]{width:100%;height:auto;background-color:#fff;border:1px solid lightgrey;border-radius:20px;margin-top:2rem}.form[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:1rem 0 0 1rem}.form[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{justify-content:center;padding:0 2rem}[_nghost-%COMP%]     .p-button-text{width:120px;background-color:#008cff;color:#fff;border-color:#0000;text-align:center}.input-cate-account[_ngcontent-%COMP%]{margin-right:auto}.app-table[_ngcontent-%COMP%]{width:100%;height:auto;box-shadow:#959da533 0 8px 24px!important;background-color:#fff!important;margin-top:2rem;padding:5px}.app-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .app-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{justify-content:center}.app-table[_ngcontent-%COMP%]   .column-1[_ngcontent-%COMP%]{min-width:260px}.app-table[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]{min-width:150px}.app-table[_ngcontent-%COMP%]   .column-3[_ngcontent-%COMP%]{min-width:220px}.app-table[_ngcontent-%COMP%]   .column-4[_ngcontent-%COMP%]{min-width:200px}.app-table[_ngcontent-%COMP%]   .column-5[_ngcontent-%COMP%]{min-width:170px}.app-table[_ngcontent-%COMP%]   .column-6[_ngcontent-%COMP%]{min-width:270px}.app-table[_ngcontent-%COMP%]   .column-7[_ngcontent-%COMP%]{min-width:200px}.app-table[_ngcontent-%COMP%]   .column-8[_ngcontent-%COMP%]{min-width:200px}.app-table[_ngcontent-%COMP%]   .column-9[_ngcontent-%COMP%]{min-width:300px}.app-table[_ngcontent-%COMP%]   .column-10[_ngcontent-%COMP%]{min-width:150px}.app-table[_ngcontent-%COMP%]   .column-11[_ngcontent-%COMP%]{min-width:300px}.table-caption[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.btn-search[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.customer-no[_ngcontent-%COMP%]{text-decoration:underline;color:#008cff}.active[_ngcontent-%COMP%]{color:green;margin:auto}.inactive[_ngcontent-%COMP%]{color:red;margin:auto}.avatar[_ngcontent-%COMP%]{border-radius:50%}.form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #a6d5fa;border-color:#2196f3}"]}),o})();var N=c(1841);const D=`${y.q.host}${y.q.endpoint.systemEndpoint.membershipGiftEndpoint}`,W=`${y.q.host}${y.q.endpoint.systemEndpoint.membershipEndpoint}`;let O=(()=>{class o extends B.b{constructor(e,n,i){super(e,n,i)}getMembershipGift(e){try{let i=`${D}${T.c.loyalty_membership_gift_list}`;return console.log("requestUrl",i),this._httpUtil.doPost(i,e)}catch(n){return console.error(n),null}}getMembershipGiftDetail(e){try{let i=`${D}${T.c.loyalty_membership_gift_detail}/${e}`;return console.log(i),this._httpUtil.doGet(i)}catch(n){return console.error(n),null}}getMembershipList(){try{let n=`${y.q.host}${y.q.endpoint.systemEndpoint.membershipEndpoint}${T.c.member_list}`;return console.log(n),this._httpUtil.doGet(n)}catch(e){return console.error(e),null}}updateMembership(e,n){try{let r=`${y.q.host}${y.q.endpoint.systemEndpoint.membershipEndpoint}${T.c.loyalty_membership_update}/${e}`;return console.log(r),this._httpUtil.doPatch(r,n)}catch(i){return console.error(i),null}}addMembershipGift(e){try{return this._httpUtil.doUpload(`${D}${T.c.loyalty_membership_gift_add}`,e)}catch(n){return console.error(n),null}}updateMembershipGift(e,n){try{return this._httpUtil.doUpload(`${D}${T.c.loyalty_membership_gift_update}/${n}`,e)}catch(i){return console.error(i),null}}doDelete(e){try{return this._httpUtil.doDelete(`${D}${T.c.loyalty_membership_gift_delete}/${e}`)}catch(n){return console.error(n),null}}advancedSearch(e){try{let i=`${D}${T.c.loyalty_membership_gift_search}`;return console.log("search campaign",e),this._httpUtil.doPost(i,e)}catch(n){return null}}getQrHistoryList(e){try{let i=`${W}${T.c.campaign_qrcode_history}`;return console.log("sss"+i),this._httpUtil.doPost(i,e)}catch(n){return console.error(n),null}}advancedSearchQrHistory(e){try{let i=`${W}${T.c.campaign_search_qr_code}`;return console.log("search qrcode",e),this._httpUtil.doPost(i,e)}catch(n){return null}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(z.y),t.LFG($.m),t.LFG(Z.sK))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Q=c(8122);let dt=(()=>{class o extends A.H{constructor(e,n,i,r,l,d,g,m,u,h,_,v){super(r,l,d,g,m,u,h,_,v),this.loyaltyService=e,this.formBuilder=n,this._ref=i,this.autoResize=!0}ngOnInit(){this.giftFormCreate=this.formBuilder.group({loyaltyGiftExchangeDateStart:["",{validators:[a.kI.required],asyncValidators:[],updateOn:"change"}],loyaltyGiftExchangeDateEnd:["",{validators:[a.kI.required],asyncValidators:[],updateOn:"change"}],loyaltyGiftLimitQuantity:["",{validators:[a.kI.pattern(y.q.validators.patterns.onlyNumeric),a.kI.required],asyncValidators:[],updateOn:"change"}],loyaltyGiftRequirePoint:["",{validators:[a.kI.pattern(y.q.validators.patterns.onlyNumeric),a.kI.required],asyncValidators:[],updateOn:"change"}],loyaltyGiftName:["",{validators:[a.kI.required],asyncValidators:[],updateOn:"change"}],loyaltyGiftDescription:["",{validators:[a.kI.required],asyncValidators:[],updateOn:"change"}]})}ngOnDestroy(){}onCreateNewMembershipGift(){var e;let n=new FormData;n.append("giftThumbnail",this.currentThumbnailFile),n.append("giftIcon",this.currentIconFile),n.append("giftBanner",this.currentBannerFile),n.append("giftStartDate",this.giftFormCreate.value.loyaltyGiftExchangeDateStart),n.append("giftEndDate",this.giftFormCreate.value.loyaltyGiftExchangeDateEnd),n.append("giftLimitedQuanlity",this.giftFormCreate.value.loyaltyGiftLimitQuantity),n.append("giftRequiredPoint",this.giftFormCreate.value.loyaltyGiftRequirePoint),n.append("giftTitle",this.giftFormCreate.value.loyaltyGiftName),n.append("giftDescription",this.giftFormCreate.value.loyaltyGiftDescription);const i=null===(e=this.loyaltyService.addMembershipGift(n))||void 0===e?void 0:e.subscribe(r=>{if(r.type!==N.dt.UploadProgress&&r instanceof N.Zn){let l=r.body;console.log(l),200===l.responseStatus?(this.presentToast("success",this._translateService.instant(l.content.message)),this._ref.close()):417===l.responseStatus?this.presentToast("warning",this._translateService.instant(l.content.message)):(console.log(l),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")))}},r=>{console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))});console.log(i)}onSelectThumbnail(e){this.currentThumbnailFile=e.files[0],console.log(this.currentThumbnailFile)}onSelectIcon(e){this.currentIconFile=e.files[0],console.log(this.currentThumbnailFile)}onSelectBanner(e){this.currentBannerFile=e.files[0],console.log(this.currentThumbnailFile)}onRemoveThumbnail(e){this.currentThumbnailFile=this.fileUndefined,console.log(this.currentThumbnailFile)}onRemoveIcon(e){this.currentIconFile=this.fileUndefined,console.log(this.currentIconFile)}onRemoveBanner(e){this.currentBannerFile=this.fileUndefined,console.log(this.currentBannerFile)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(O),t.Y36(a.qu),t.Y36(f.E7),t.Y36(p.gz),t.Y36(P.Dx),t.Y36(p.F0),t.Y36(q.uw),t.Y36(M.v),t.Y36(L.w),t.Y36(U._W),t.Y36(Z.sK),t.Y36(f.xA))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-loyalty-dialog-create-product"]],features:[t.qOj],decls:49,vars:27,consts:[[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"form-control-label"],["type","date","id","loyaltyGiftExchangeDateStart","formControlName","loyaltyGiftExchangeDateStart",1,"form-control",3,"placeholder"],["for","qrcodeDateCreate",1,"form-control-label"],["type","date","id","loyaltyGiftExchangeDateEnd","formControlName","loyaltyGiftExchangeDateEnd",1,"form-control",3,"placeholder"],["for","qrcodePackingNumber",1,"form-control-label"],["type","number","id","loyaltyGiftLimitQuantity","formControlName","loyaltyGiftLimitQuantity",1,"form-control",3,"placeholder"],["type","number","id","loyaltyGiftRequirePoint","formControlName","loyaltyGiftRequirePoint",1,"form-control",3,"placeholder"],["type","text","id","loyaltyGiftName","formControlName","loyaltyGiftName",1,"form-control",3,"placeholder"],["rows","5","cols","30","placeholder","Description Product","pInputTextarea","","id","loyaltyGiftDescription","formControlName","loyaltyGiftDescription",1,"form-control",3,"autoResize","placeholder"],["for","customerIdentificationFront",1,"form-control-label"],["name","docs[]","accept","image/*",3,"multiple","maxFileSize","showUploadButton","onSelect","onRemove"],[1,"div-contain-add-button"],["styleClass","button-add","icon","pi pi-plus",3,"label","click"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"label",4),t._uU(5),t.qZA(),t._UZ(6,"input",5),t.qZA(),t.qZA(),t.TgZ(7,"div",2),t.TgZ(8,"div",3),t.TgZ(9,"label",6),t._uU(10),t.qZA(),t._UZ(11,"input",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div"),t.TgZ(13,"div",3),t.TgZ(14,"label",8),t._uU(15),t.qZA(),t._UZ(16,"input",9),t.qZA(),t.qZA(),t.TgZ(17,"div"),t.TgZ(18,"div",3),t.TgZ(19,"label",8),t._uU(20),t.qZA(),t._UZ(21,"input",10),t.qZA(),t.qZA(),t.TgZ(22,"div"),t.TgZ(23,"div",3),t.TgZ(24,"label",8),t._uU(25),t.qZA(),t._UZ(26,"input",11),t.qZA(),t.qZA(),t.TgZ(27,"div"),t.TgZ(28,"div",3),t.TgZ(29,"label",8),t._uU(30),t.qZA(),t._UZ(31,"textarea",12),t.qZA(),t.qZA(),t.TgZ(32,"div"),t.TgZ(33,"div",3),t.TgZ(34,"label",13),t._uU(35),t.qZA(),t.TgZ(36,"p-fileUpload",14),t.NdJ("onSelect",function(r){return n.onSelectThumbnail(r)})("onRemove",function(r){return n.onRemoveThumbnail(r)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div"),t.TgZ(38,"div",3),t.TgZ(39,"label",13),t._uU(40),t.qZA(),t.TgZ(41,"p-fileUpload",14),t.NdJ("onSelect",function(r){return n.onSelectIcon(r)})("onRemove",function(r){return n.onRemoveIcon(r)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div"),t.TgZ(43,"div",3),t.TgZ(44,"label",13),t._uU(45),t.qZA(),t.TgZ(46,"p-fileUpload",14),t.NdJ("onSelect",function(r){return n.onSelectBanner(r)})("onRemove",function(r){return n.onRemoveBanner(r)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",15),t.TgZ(48,"p-button",16),t.NdJ("click",function(){return n.onCreateNewMembershipGift()}),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.giftFormCreate),t.xp6(5),t.Oqu(n._translateService.instant("pages.loyalty.labels.gift-start-date-exchange")),t.xp6(1),t.Q6J("placeholder",n._translateService.instant("pages.loyalty.placeholders.gift-start-date-exchange")),t.xp6(4),t.Oqu(n._translateService.instant("pages.loyalty.labels.gift-end-date-exchange")),t.xp6(1),t.Q6J("placeholder",n._translateService.instant("pages.loyalty.placeholders.gift-end-date-exchange")),t.xp6(4),t.hij("",n._translateService.instant("pages.loyalty.labels.gift-limit")," "),t.xp6(1),t.Q6J("placeholder",n._translateService.instant("pages.loyalty.placeholders.gift-limit")),t.xp6(4),t.hij("",n._translateService.instant("pages.loyalty.labels.gift-point-required")," "),t.xp6(1),t.Q6J("placeholder",n._translateService.instant("pages.loyalty.placeholders.gift-point-required")),t.xp6(4),t.hij("",n._translateService.instant("pages.loyalty.labels.gift-name")," "),t.xp6(1),t.Q6J("placeholder",n._translateService.instant("pages.loyalty.placeholders.gift-name")),t.xp6(4),t.hij("",n._translateService.instant("pages.loyalty.labels.gift-description")," "),t.xp6(1),t.Q6J("autoResize",n.autoResize)("placeholder",n._translateService.instant("pages.loyalty.placeholders.gift-description")),t.xp6(4),t.Oqu(n._translateService.instant("pages.loyalty.labels.gift-thumbnail")),t.xp6(1),t.Q6J("multiple",!0)("maxFileSize",2e6)("showUploadButton",!0),t.xp6(4),t.Oqu(n._translateService.instant("pages.loyalty.labels.gift-icon")),t.xp6(1),t.Q6J("multiple",!0)("maxFileSize",2e6)("showUploadButton",!0),t.xp6(4),t.Oqu(n._translateService.instant("pages.loyalty.labels.gift-banner")),t.xp6(1),t.Q6J("multiple",!0)("maxFileSize",2e6)("showUploadButton",!0),t.xp6(2),t.Q6J("label",n._translateService.instant("pages.loyalty.labels.add-gift")))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.wV,Y.g,Q.p,b.zx],styles:["[_nghost-%COMP%]     .button-add{border-radius:8px;float:right;margin-top:3%;margin-bottom:3%}.div-contain-add-button[_ngcontent-%COMP%]{margin-bottom:10%}.-size-img[_ngcontent-%COMP%]{display:inline-block;width:50px;height:inherit}.-size-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:auto;object-fit:cover}.form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #a6d5fa;border-color:#2196f3}"]}),o})();function gt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"div",21),t.TgZ(2,"div",22),t._UZ(3,"img",23),t.qZA(),t._UZ(4,"div",24),t._UZ(5,"div",25),t.TgZ(6,"div"),t.TgZ(7,"button",26),t.NdJ("click",function(i){return t.CHM(e),t.oxw(3).handleShowThumbnail(i)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(3),t.Q6J("src",e.membershipGift.giftThumbnail,t.LSH)}}function mt(o,s){if(1&o&&t.YNc(0,gt,8,1,"div",19),2&o){const e=t.oxw(2);t.Q6J("ngIf",!e.currentThumbnailFile)}}function ut(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"div",21),t.TgZ(2,"div",22),t._UZ(3,"img",23),t.qZA(),t._UZ(4,"div",24),t._UZ(5,"div",25),t.TgZ(6,"div"),t.TgZ(7,"button",26),t.NdJ("click",function(i){return t.CHM(e),t.oxw(3).handleShowIcon(i)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(3),t.Q6J("src",e.membershipGift.giftIcon,t.LSH)}}function ht(o,s){if(1&o&&t.YNc(0,ut,8,1,"div",19),2&o){const e=t.oxw(2);t.Q6J("ngIf",!e.currentIconFile)}}function _t(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"div",21),t.TgZ(2,"div",22),t._UZ(3,"img",23),t.qZA(),t._UZ(4,"div",24),t._UZ(5,"div",25),t.TgZ(6,"div"),t.TgZ(7,"button",26),t.NdJ("click",function(i){return t.CHM(e),t.oxw(3).handleShowBanner(i)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(3),t.Q6J("src",e.membershipGift.giftBanner,t.LSH)}}function ft(o,s){if(1&o&&t.YNc(0,_t,8,1,"div",19),2&o){const e=t.oxw(2);t.Q6J("ngIf",!e.currentBannerFile)}}function yt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form",1),t.TgZ(1,"div",2),t.TgZ(2,"div",3),t.TgZ(3,"div",4),t.TgZ(4,"label",5),t._uU(5),t.qZA(),t._UZ(6,"input",6),t.ALo(7,"date"),t.qZA(),t.qZA(),t.TgZ(8,"div",3),t.TgZ(9,"div",4),t.TgZ(10,"label",7),t._uU(11),t.qZA(),t._UZ(12,"input",8),t.ALo(13,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div"),t.TgZ(15,"div",4),t.TgZ(16,"label",9),t._uU(17),t.qZA(),t.TgZ(18,"input",10),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().membershipGift.giftLimit=i}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div"),t.TgZ(20,"div",4),t.TgZ(21,"label",9),t._uU(22),t.qZA(),t.TgZ(23,"input",11),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().membershipGift.giftRequiredPoint=i}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div"),t.TgZ(25,"div",4),t.TgZ(26,"label",9),t._uU(27),t.qZA(),t.TgZ(28,"input",12),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().membershipGift.giftTitle=i}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div"),t.TgZ(30,"div",4),t.TgZ(31,"label",9),t._uU(32),t.qZA(),t.TgZ(33,"textarea",13),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().membershipGift.giftDescription=i}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div"),t.TgZ(35,"div",4),t.TgZ(36,"label",14),t._uU(37),t.qZA(),t.TgZ(38,"p-fileUpload",15),t.NdJ("onSelect",function(i){return t.CHM(e),t.oxw().onSelectThumbnail(i)})("onRemove",function(i){return t.CHM(e),t.oxw().onRemoveThumbnail(i)}),t.YNc(39,mt,1,1,"ng-template",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div"),t.TgZ(41,"div",4),t.TgZ(42,"label",14),t._uU(43),t.qZA(),t.TgZ(44,"p-fileUpload",15),t.NdJ("onSelect",function(i){return t.CHM(e),t.oxw().onSelectIcon(i)})("onRemove",function(i){return t.CHM(e),t.oxw().onRemoveIcon(i)}),t.YNc(45,ht,1,1,"ng-template",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div"),t.TgZ(47,"div",4),t.TgZ(48,"label",14),t._uU(49),t.qZA(),t.TgZ(50,"p-fileUpload",15),t.NdJ("onSelect",function(i){return t.CHM(e),t.oxw().onSelectBanner(i)})("onRemove",function(i){return t.CHM(e),t.oxw().onRemoveBanner(i)}),t.YNc(51,ft,1,1,"ng-template",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"div",17),t.TgZ(53,"p-button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().onUpdateMembershipGift()}),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.giftFormUpdate),t.xp6(5),t.Oqu(e._translateService.instant("pages.loyalty.labels.gift-start-date-exchange")),t.xp6(1),t.Q6J("ngModel",t.xi3(7,36,e.giftStartDate,"yyyy-MM-dd"))("placeholder",e._translateService.instant("pages.loyalty.placeholders.gift-start-date-exchange")),t.xp6(5),t.Oqu(e._translateService.instant("pages.loyalty.labels.gift-end-date-exchange")),t.xp6(1),t.Q6J("ngModel",t.xi3(13,39,e.giftEndDate,"yyyy-MM-dd"))("placeholder",e._translateService.instant("pages.loyalty.placeholders.gift-end-date-exchange")),t.xp6(5),t.hij("",e._translateService.instant("pages.loyalty.labels.gift-limit")," "),t.xp6(1),t.Q6J("ngModel",e.membershipGift.giftLimit)("placeholder",e._translateService.instant("pages.loyalty.placeholders.gift-limit")),t.xp6(4),t.hij("",e._translateService.instant("pages.loyalty.labels.gift-point-required")," "),t.xp6(1),t.Q6J("ngModel",e.membershipGift.giftRequiredPoint)("placeholder",e._translateService.instant("pages.loyalty.placeholders.gift-point-required")),t.xp6(4),t.hij("",e._translateService.instant("pages.loyalty.labels.gift-name")," "),t.xp6(1),t.Q6J("ngModel",e.membershipGift.giftTitle)("placeholder",e._translateService.instant("pages.loyalty.placeholders.gift-name")),t.xp6(4),t.hij("",e._translateService.instant("pages.loyalty.labels.gift-description")," "),t.xp6(1),t.Q6J("autoResize",e.autoResize)("ngModel",e.membershipGift.giftDescription)("placeholder",e._translateService.instant("pages.loyalty.placeholders.gift-description")),t.xp6(4),t.Oqu(e._translateService.instant("pages.loyalty.labels.gift-thumbnail")),t.xp6(1),t.Q6J("multiple",!1)("maxFileSize",5e6)("showUploadButton",!1)("showCancelButton",!1),t.xp6(5),t.Oqu(e._translateService.instant("pages.loyalty.labels.gift-icon")),t.xp6(1),t.Q6J("multiple",!1)("maxFileSize",5e6)("showUploadButton",!1)("showCancelButton",!1),t.xp6(5),t.Oqu(e._translateService.instant("pages.loyalty.labels.gift-banner")),t.xp6(1),t.Q6J("multiple",!1)("maxFileSize",5e6)("showUploadButton",!1)("showCancelButton",!1),t.xp6(3),t.Q6J("label",e._translateService.instant("pages.loyalty.labels.update-gift"))}}let vt=(()=>{class o extends A.H{constructor(e,n,i,r,l,d,g,m,u,h,_,v,S){super(l,d,g,m,u,h,_,v,S),this.loyaltyService=e,this.formBuilder=n,this._ref=i,this.config=r,this.autoResize=!0}ngOnInit(){this.membershipGiftId=this.config.data.giftId,this.doGetMembershipGiftDetail(this.membershipGiftId).then(e=>{this.membershipGiftThumbnailImg=e.giftThumbnail,this.membershipGiftIconImg=e.giftIcon,this.membershipGiftBannerImg=e.giftBanner,this.membershipGift=e}),this.giftFormUpdate=this.formBuilder.group({loyaltyGiftExchangeDateStart:["",{validators:[a.kI.required],asyncValidators:[],updateOn:"change"}],loyaltyGiftExchangeDateEnd:["",{validators:[a.kI.required],asyncValidators:[],updateOn:"change"}],loyaltyGiftLimitQuantity:["",{validators:[a.kI.pattern(y.q.validators.patterns.onlyNumeric),a.kI.required],asyncValidators:[],updateOn:"change"}],loyaltyGiftRequirePoint:["",{validators:[a.kI.pattern(y.q.validators.patterns.onlyNumeric),a.kI.required],asyncValidators:[],updateOn:"change"}],loyaltyGiftName:["",{validators:[a.kI.required],asyncValidators:[],updateOn:"change"}],loyaltyGiftDescription:["",{validators:[a.kI.required],asyncValidators:[],updateOn:"change"}]})}ngOnDestroy(){}doGetMembershipGiftDetail(e){return new Promise((n,i)=>{var r;null===(r=this.loyaltyService.getMembershipGiftDetail(e))||void 0===r||r.subscribe(l=>{200===l.responseStatus?(this.presentToast("success",this._translateService.instant(l.content.message)),this.membershipGift=l.content.datas.giftDetail,this.giftStartDate=new Date(this.membershipGift.giftStartDate),this.giftEndDate=new Date(this.membershipGift.giftEndDate),this.checkIfImageExists(this.membershipGift.giftThumbnail),this.checkIfImageExists(this.membershipGift.giftBanner),this.checkIfImageExists(this.membershipGift.giftIcon),n(l.content.datas.giftDetail)):417===l.responseStatus?(this.presentToast("warning",this._translateService.instant(l.content.message)),i("Something Wrong")):(console.log(l),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")),i("Something Wrong")),i("Something Wrong")},l=>{console.log(l),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")),i("Something Wrong")})})}onUpdateMembershipGift(){var e;let n=new FormData;n.append("giftThumbnail",this.currentThumbnailFile||this.membershipGiftThumbnailImg),n.append("giftIcon",this.currentIconFile||this.membershipGiftIconImg),n.append("giftBanner",this.currentBannerFile||this.membershipGiftBannerImg),n.append("giftStartDate",this.giftFormUpdate.value.loyaltyGiftExchangeDateStart),n.append("giftEndDate",this.giftFormUpdate.value.loyaltyGiftExchangeDateEnd),n.append("giftLimitedQuanlity",this.giftFormUpdate.value.loyaltyGiftLimitQuantity),n.append("giftRequiredPoint",this.giftFormUpdate.value.loyaltyGiftRequirePoint),n.append("giftTitle",this.giftFormUpdate.value.loyaltyGiftName),n.append("giftDescription",this.giftFormUpdate.value.loyaltyGiftDescription);const i=null===(e=this.loyaltyService.updateMembershipGift(n,this.membershipGiftId))||void 0===e?void 0:e.subscribe(r=>{if(r.type!==N.dt.UploadProgress&&r instanceof N.Zn){let l=r.body;console.log(l),200===l.responseStatus?(this.presentToast("success",this._translateService.instant(l.content.message)),this._ref.close()):417===l.responseStatus?this.presentToast("warning",this._translateService.instant(l.content.message)):(console.log(l),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")))}},r=>{console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))});console.log(i)}handleShowThumbnail(e){this.currentThumbnailFile=this.membershipGiftThumbnailImg}handleShowIcon(e){this.currentIconFile=this.membershipGiftIconImg}handleShowBanner(e){this.currentBannerFile=this.membershipGiftBannerImg}onSelectThumbnail(e){this.currentThumbnailFile=e.files[0],console.log(this.currentThumbnailFile)}onSelectIcon(e){this.currentIconFile=e.files[0],console.log(this.currentThumbnailFile)}onSelectBanner(e){this.currentBannerFile=e.files[0],console.log(this.currentThumbnailFile)}onRemoveThumbnail(e){this.currentThumbnailFile=this.fileUndefined,console.log(this.currentThumbnailFile)}onRemoveIcon(e){this.currentIconFile=this.fileUndefined,console.log(this.currentIconFile)}onRemoveBanner(e){this.currentBannerFile=this.fileUndefined,console.log(this.currentBannerFile)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(O),t.Y36(a.qu),t.Y36(f.E7),t.Y36(f.S),t.Y36(p.gz),t.Y36(P.Dx),t.Y36(p.F0),t.Y36(q.uw),t.Y36(M.v),t.Y36(L.w),t.Y36(U._W),t.Y36(Z.sK),t.Y36(f.xA))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-loyalty-dialog-update-product"]],features:[t.qOj],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"form-control-label"],["type","date","id","loyaltyGiftExchangeDateStart","formControlName","loyaltyGiftExchangeDateStart",1,"form-control",3,"ngModel","placeholder"],["for","qrcodeDateCreate",1,"form-control-label"],["type","date","id","loyaltyGiftExchangeDateEnd","formControlName","loyaltyGiftExchangeDateEnd",1,"form-control",3,"ngModel","placeholder"],["for","qrcodePackingNumber",1,"form-control-label"],["type","number","id","loyaltyGiftLimitQuantity","formControlName","loyaltyGiftLimitQuantity",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["type","number","id","loyaltyGiftRequirePoint","formControlName","loyaltyGiftRequirePoint",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["type","text","id","loyaltyGiftName","formControlName","loyaltyGiftName",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["rows","5","cols","30","placeholder","Description Product","pInputTextarea","","id","loyaltyGiftDescription","formControlName","loyaltyGiftDescription",1,"form-control",3,"autoResize","ngModel","placeholder","ngModelChange"],["for","customerIdentificationFront",1,"form-control-label"],["name","docs[]","accept","image/*","invalidFileSizeMessageSummary","{0}: K\xedch th\u01b0\u1edbc t\u1ec7p kh\xf4ng h\u1ee3p l\u1ec7","invalidFileSizeMessageDetail","K\xedch th\u01b0\u1edbc t\u1ec7p t\u1ea3i l\xean t\u1ed1i \u0111a l\xe0 {0}.","chooseLabel","C\u1eadp nh\u1eadt \u1ea3nh","uploadLabel","T\u1ea3i l\xean","cancelLabel","H\u1ee7y",3,"multiple","maxFileSize","showUploadButton","showCancelButton","onSelect","onRemove"],["pTemplate","content"],[1,"div-contain-update-button"],["styleClass","button-update","icon","pi pi-plus",3,"label","click"],["class","p-fileupload-files",4,"ngIf"],[1,"p-fileupload-files"],[1,"p-fileupload-row"],[1,"-size-img"],["alt","Image",3,"src"],[1,"p-fileupload-filename"],[1,"p-fileupload-filesize"],["pButton","","type","button","icon","pi pi-times",1,"p-button-text",3,"click"]],template:function(e,n){1&e&&t.YNc(0,yt,54,42,"form",0),2&e&&t.Q6J("ngIf",n.membershipGift)},directives:[C.O5,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.wV,Y.g,Q.p,x.jx,b.zx,b.Hq],pipes:[C.uU],styles:["[_nghost-%COMP%]     .button-update{border-radius:8px;float:right;margin-top:3%;margin-bottom:3%}.div-contain-update-button[_ngcontent-%COMP%]{margin-bottom:10%}.-size-img[_ngcontent-%COMP%]{display:inline-block;width:50px;height:inherit}.-size-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:auto;object-fit:cover}.form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #a6d5fa;border-color:#2196f3}"]}),o})(),xt=(()=>{class o extends A.H{constructor(e,n,i,r,l,d,g,m,u,h,_,v,S){super(n,i,r,l,d,g,m,u,h),this.fb=e,this.loyaltyService=_,this._ref=v,this._confirmationService=S,this.isMembershipGiftList=!0,this.searchEvent=new t.vpe}ngOnInit(){this.loyaltyMembershipGiftSearchForm=this.fb.group({giftTitle:["",{validators:[a.kI.maxLength(50)],asyncValidators:[],updateOn:"change"}],giftStartDate:["",{validators:[],asyncValidators:[],updateOn:"change"}],giftEndDate:["",{validators:[],asyncValidators:[],updateOn:"change"}]}),this.initializePage()}initializePage(){}searchLoyaltyMembershipGift(){var e,n;const i={giftTitle:this.loyaltyMembershipGiftSearchForm.value.giftTitle,redeemStartDate:this.loyaltyMembershipGiftSearchForm.value.giftStartDate,redeemEndDate:this.loyaltyMembershipGiftSearchForm.value.giftEndDate};console.log(i),this.isMembershipGiftList?null===(e=this.loyaltyService.advancedSearch(i))||void 0===e||e.subscribe(r=>{200===r.responseStatus?(this.presentToast("success",this._translateService.instant(r.content.message)),this.searchEvent.emit(r.content.datas.datasList),console.log(r.content.datas.datasList)):417===r.responseStatus?this.presentToast("warning",this._translateService.instant(r.content.message)):(console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")))},r=>{console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))}):null===(n=this.loyaltyService.advancedSearch(i))||void 0===n||n.subscribe(r=>{200===r.responseStatus?(this.presentToast("success",this._translateService.instant(r.content.message)),this.searchEvent.emit(r.content.datas.datasList)):417===r.responseStatus?this.presentToast("warning",this._translateService.instant(r.content.message)):(console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")))},r=>{console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(p.gz),t.Y36(P.Dx),t.Y36(p.F0),t.Y36(q.uw),t.Y36(M.v),t.Y36(L.w),t.Y36(U._W),t.Y36(Z.sK),t.Y36(f.xA),t.Y36(O),t.Y36(f.E7),t.Y36(x.YP))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-advance-search"]],inputs:{isMembershipGiftList:"isMembershipGiftList"},outputs:{searchEvent:"searchEvent"},features:[t.qOj],decls:24,vars:7,consts:[["action","",1,"form",3,"formGroup"],[1,"row","input-field"],[1,"col-md-6"],[1,"form-group"],[1,"form-control-label"],["type","text","id","giftTitle","formControlName","giftTitle",1,"form-control",3,"placeholder"],["type","date","id","giftStartDate","formControlName","giftStartDate",1,"form-control"],["type","date","id","giftEndDate","formControlName","giftEndDate",1,"form-control"],[1,"flex","btn-search"],["pButton","","type","button",3,"label","click"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"h5"),t._uU(2),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",1),t.TgZ(5,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"label",4),t._uU(8),t.qZA(),t._UZ(9,"input",5),t.qZA(),t.qZA(),t.TgZ(10,"div",2),t.TgZ(11,"div",3),t.TgZ(12,"label",4),t._uU(13),t.qZA(),t._UZ(14,"input",6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",1),t.TgZ(16,"div",2),t.TgZ(17,"div",3),t.TgZ(18,"label",4),t._uU(19),t.qZA(),t._UZ(20,"input",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",1),t.TgZ(22,"div",8),t.TgZ(23,"button",9),t.NdJ("click",function(){return n.searchLoyaltyMembershipGift()}),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.loyaltyMembershipGiftSearchForm),t.xp6(2),t.Oqu(n._translateService.instant("pages.loyalty.advance-search")),t.xp6(6),t.hij("",n._translateService.instant("pages.loyalty.labels.gift-name")," "),t.xp6(1),t.Q6J("placeholder",n._translateService.instant("pages.loyalty.labels.gift-name")),t.xp6(4),t.Oqu(n._translateService.instant("pages.loyalty.labels.gift-start-date-exchange")),t.xp6(6),t.Oqu(n._translateService.instant("pages.loyalty.labels.gift-end-date-exchange")),t.xp6(4),t.Q6J("label",n._translateService.instant("pages.loyalty.labels.search")))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,b.Hq],styles:[".form[_ngcontent-%COMP%]{width:100%;height:auto;box-shadow:#959da533 0 8px 24px!important;background-color:#fff!important;margin-top:2rem}.form[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:1rem 0 0 1rem}.form[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{padding:0 2rem}.form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #a6d5fa;border-color:#2196f3}[_nghost-%COMP%]     .p-dropdown{border-radius:8px;width:100%}[_nghost-%COMP%]     .p-button-text{width:120px;background-color:#008cff;color:#fff;border-color:#0000;text-align:center}.btn-search[_ngcontent-%COMP%]{float:right;padding-bottom:2%;display:flex;justify-content:flex-end;align-items:center}"]}),o})();var Zt=c(3473);function bt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"h5"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t.TgZ(4,"p-button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).showModalDialogAdd()}),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",e._translateService.instant("pages.loyalty.table.result-list")," ")}}function Tt(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"th",10),t._uU(2),t.qZA(),t.TgZ(3,"th",10),t._uU(4),t.qZA(),t.TgZ(5,"th",10),t._uU(6),t.qZA(),t.TgZ(7,"th",10),t._uU(8),t.qZA(),t.TgZ(9,"th",10),t._uU(10),t.qZA(),t.TgZ(11,"th",10),t._uU(12),t.qZA(),t.TgZ(13,"th",10),t._uU(14),t.qZA(),t.TgZ(15,"th",10),t._uU(16),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",e._translateService.instant("pages.loyalty.table.activity")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.loyalty.table.status")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.loyalty.table.limit")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.loyalty.table.icon")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.loyalty.table.gift-name")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.loyalty.table.gift-point-required")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.loyalty.table.gift-start-date-exchange")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.loyalty.table.gift-end-date-exchange")," ")}}function Ct(o,s){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e._translateService.instant("pages.loyalty.table.activity")," ")}}function qt(o,s){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e._translateService.instant("pages.loyalty.table.non-activity")," ")}}function St(o,s){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.AsE(" ",e.giftCurrentLimit,"/",e.giftLimit," ")}}function At(o,s){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e._translateService.instant("pages.loyalty.table.non-limit")," ")}}function Pt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"button",11),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).showModalDialogUpdate(r.giftId)}),t.qZA(),t._uU(3," | "),t.TgZ(4,"button",12),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).doDelete(r.giftId,"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a m\xf3n qu\xe0 n\xe0y kh\xf4ng?")}),t.qZA(),t.qZA(),t.YNc(5,Ct,2,1,"td",13),t.YNc(6,qt,2,1,"td",13),t.YNc(7,St,2,2,"td",13),t.YNc(8,At,2,1,"td",13),t.TgZ(9,"td"),t._UZ(10,"img",14),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"date"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.ALo(20,"date"),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit,n=t.oxw(2);t.xp6(5),t.Q6J("ngIf",n.checkStatusOfGift(e.giftEndDate,e.giftStartDate)),t.xp6(1),t.Q6J("ngIf",!n.checkStatusOfGift(e.giftEndDate,e.giftStartDate)),t.xp6(1),t.Q6J("ngIf",0!==e.giftLimit),t.xp6(1),t.Q6J("ngIf",0===e.giftLimit),t.xp6(2),t.s9C("src",e.giftIcon,t.LSH),t.xp6(2),t.hij(" ",e.giftTitle," "),t.xp6(2),t.hij(" ",e.giftRequiredPoint," "),t.xp6(2),t.hij(" ",t.xi3(17,9,e.giftStartDate,"dd/MM/yyyy")," "),t.xp6(3),t.hij(" ",t.xi3(20,12,e.giftEndDate,"dd/MM/yyyy")," ")}}const Mt=function(){return[5,10,15]};function Lt(o,s){if(1&o&&(t.TgZ(0,"div",3),t.TgZ(1,"p-table",4),t.YNc(2,bt,5,1,"ng-template",5),t.YNc(3,Tt,17,8,"ng-template",6),t.YNc(4,Pt,21,15,"ng-template",7),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("value",e.listGift)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(5,Mt))}}let Ut=(()=>{class o extends A.H{constructor(e,n,i,r,l,d,g,m,u,h,_){super(i,r,l,d,g,m,u,h,_),this.loyaltyService=e,this._confirmationService=n,this._pageTitle.setTitle(this._translateService.instant("pages.qrcode.labels.page-title"))}ngOnInit(){this.getMembershipGiftList()}ngOnDestroy(){}getMembershipGiftList(){var e=this;return(0,E.Z)(function*(){var n;e._common.attachSpinner(),null===(n=e.loyaltyService.getMembershipGift({page:1,itemPerPage:"10",productId:0}))||void 0===n||n.pipe((0,G.g)(e.loadingTime)).subscribe(i=>{200===i.responseStatus?(e.listGift=i.content.datas.datasList,console.log(i),e.presentToast("success",e._translateService.instant(i.content.message))):417===i.responseStatus?e.presentToast("warning",e._translateService.instant(i.content.message)):e.presentToast("error",e._translateService.instant("common.errors-message.common-server-error")),e._common.detachSpinner()},i=>{console.log(i),e.presentToast("error",e._translateService.instant("common.errors-message.common-server-error"))})})()}doDelete(e,n){console.log(n),this._confirmationService.confirm({message:n,accept:()=>{var i;null===(i=this.loyaltyService.doDelete(e))||void 0===i||i.subscribe(r=>{200===r.responseStatus?(this.presentToast("success",this._translateService.instant(r.content.message)),this.getMembershipGiftList()):this.presentToast(417==r.responseStatus?"warning":"error",this._translateService.instant(r.statusText))},r=>{this.presentToast("error",this._translateService.instant(r))})}})}checkStatusOfGift(e,n){const i=new Date(e),l=(new Date).getTime()-i.getTime();return!(Math.ceil(l/864e5)>0)}receiveSearch(e){console.log("event"+e),this.listGift=e}showModalDialogAdd(){this._dialog.open(dt,{header:this._translateService.instant("Th\xeam Qu\xe0 T\u1eb7ng"),width:"50vw"})}showModalDialogUpdate(e){console.log("click button update qrcode"),this._dialog.open(vt,{header:this._translateService.instant("Ch\u1ec9nh S\u1eeda Qu\xe0 T\u1eb7ng"),width:"50vw",data:{giftId:e}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(O),t.Y36(x.YP),t.Y36(p.gz),t.Y36(P.Dx),t.Y36(p.F0),t.Y36(q.uw),t.Y36(M.v),t.Y36(L.w),t.Y36(U._W),t.Y36(Z.sK),t.Y36(f.xA))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-loyalty-gift-list"]],features:[t.qOj],decls:4,vars:1,consts:[[3,"searchEvent"],["header","X\xe1c Nh\u1eadn","icon","pi pi-exclamation-triangle"],["class","app-table",4,"ngIf"],[1,"app-table"],["styleClass","p-datatable-sm p-datatable-gridlines","responsiveLayout","scroll","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","scrollHeight","400px",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","table-caption"],["label","Th\xeam Qu\xe0 T\u1eb7ng","icon","pi pi-plus",3,"click"],[1,"column"],["pButton","","pRipple","","type","button","label","S\u1eeda",1,"p-button-success","p-button-text",3,"click"],["pButton","","pRipple","","type","button","label","Xo\xe1",1,"p-button-danger","p-button-text",3,"click"],[4,"ngIf"],[1,"icon",3,"src"]],template:function(e,n){1&e&&(t.TgZ(0,"app-main-layout"),t.TgZ(1,"app-advance-search",0),t.NdJ("searchEvent",function(r){return n.receiveSearch(r)}),t.qZA(),t._UZ(2,"p-confirmDialog",1),t.YNc(3,Lt,5,6,"div",2),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",n.listGift))},directives:[F.f,xt,Zt.Q,C.O5,J.iA,x.jx,b.zx,b.Hq],pipes:[C.uU],styles:[".app-table[_ngcontent-%COMP%]{width:100%;height:auto;box-shadow:#959da533 0 8px 24px!important;background-color:#fff!important;margin-top:2rem;padding:5px}.app-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .app-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{justify-content:center}.column[_ngcontent-%COMP%]{width:15rem}.table-caption[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.icon[_ngcontent-%COMP%]{width:150px;height:150px;margin-left:auto;margin-right:auto;object-fit:cover;border-radius:50%;display:inline-block;box-shadow:0 4px 6px #0000001a,0 2px 4px -1px #0000000f}.form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #a6d5fa;border-color:#2196f3}"]}),o})();function wt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"input",12),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw(2).index;return t.oxw().membershipList[r].membershipPoint=i}),t.qZA()}if(2&o){const e=t.oxw(2).index,n=t.oxw();t.Q6J("ngModel",n.membershipList[e].membershipPoint)}}function Ot(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"input",13),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw(2).index;return t.oxw().membershipList[r].membershipPoint=i}),t.qZA()}if(2&o){const e=t.oxw(2).index,n=t.oxw();t.Q6J("ngModel",n.membershipList[e].membershipPoint)}}function Et(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",6),t.TgZ(2,"input",7),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw().index;return t.oxw().membershipList[r].membershipClass=i}),t.qZA(),t.YNc(3,wt,1,1,"input",8),t.YNc(4,Ot,1,1,"input",9),t.TgZ(5,"textarea",10),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw().index;return t.oxw().membershipList[r].membershipDescription=i}),t.qZA(),t.TgZ(6,"button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().updateMembership(i.membershipId)}),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw().index,n=t.oxw();t.xp6(2),t.Q6J("ngModel",n.membershipList[e].membershipClass),t.xp6(1),t.Q6J("ngIf",0==e),t.xp6(1),t.Q6J("ngIf",0!=e),t.xp6(1),t.Q6J("ngModel",n.membershipList[e].membershipDescription)("autoResize",n.autoResize)}}function Gt(o,s){if(1&o&&(t.TgZ(0,"div",4),t.YNc(1,Et,7,5,"div",5),t.qZA()),2&o){const e=s.index;t.xp6(1),t.Q6J("ngIf",4>e)}}function Dt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"input",12),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw(2).index;return t.oxw().membershipList[r].membershipPoint=i}),t.qZA()}if(2&o){const e=t.oxw(2).index,n=t.oxw();t.Q6J("ngModel",n.membershipList[e].membershipPoint)}}function Yt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"input",13),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw(2).index;return t.oxw().membershipList[r].membershipPoint=i}),t.qZA()}if(2&o){const e=t.oxw(2).index,n=t.oxw();t.Q6J("ngModel",n.membershipList[e].membershipPoint)}}function Ft(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",6),t.TgZ(2,"input",7),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw().index;return t.oxw().membershipList[r].membershipClass=i}),t.qZA(),t.YNc(3,Dt,1,1,"input",8),t.YNc(4,Yt,1,1,"input",9),t.TgZ(5,"textarea",10),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw().index;return t.oxw().membershipList[r].membershipDescription=i}),t.qZA(),t.TgZ(6,"button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().updateMembership(i.membershipId)}),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw().index,n=t.oxw();t.xp6(2),t.Q6J("ngModel",n.membershipList[e].membershipClass),t.xp6(1),t.Q6J("ngIf",4==e),t.xp6(1),t.Q6J("ngIf",4!=e),t.xp6(1),t.Q6J("ngModel",n.membershipList[e].membershipDescription)("autoResize",n.autoResize)}}function Nt(o,s){if(1&o&&(t.TgZ(0,"div",4),t.YNc(1,Ft,7,5,"div",5),t.qZA()),2&o){const e=s.index;t.xp6(1),t.Q6J("ngIf",e>=4)}}let It=(()=>{class o extends A.H{constructor(e,n,i,r,l,d,g,m,u,h,_){super(i,r,l,d,g,m,u,h,_),this.loyaltyService=e,this.formBuilder=n,this.autoResize=!0,this._pageTitle.setTitle(this._translateService.instant("pages.qrcode.labels.page-title"))}ngOnInit(){this.getMembershipList()}ngOnDestroy(){}getMembershipList(){var e=this;return(0,E.Z)(function*(){var n;e._common.attachSpinner(),null===(n=e.loyaltyService.getMembershipList())||void 0===n||n.pipe((0,G.g)(e.loadingTime)).subscribe(i=>{200===i.responseStatus?(e.membershipList=i.content.datas.datasList,console.log(i),e.presentToast("success",e._translateService.instant(i.content.message))):417===i.responseStatus?e.presentToast("warning",e._translateService.instant(i.content.message)):e.presentToast("error",e._translateService.instant("common.errors-message.common-server-error")),e._common.detachSpinner()},i=>{console.log(i),e.presentToast("error",e._translateService.instant("common.errors-message.common-server-error"))})})()}updateMembership(e){var n=this;return(0,E.Z)(function*(){var i;n._common.attachSpinner(),null===(i=n.loyaltyService.updateMembership(e,{membershipClass:n.membershipList[e-1].membershipClass,membershipPoint:n.membershipList[e-1].membershipPoint,membershipDescription:n.membershipList[e-1].membershipDescription}))||void 0===i||i.pipe((0,G.g)(n.loadingTime)).subscribe(l=>{200===l.responseStatus?n.presentToast("success",n._translateService.instant(l.content.message)):417===l.responseStatus?n.presentToast("warning",n._translateService.instant(l.content.message)):n.presentToast("error",n._translateService.instant("common.errors-message.common-server-error")),n._common.detachSpinner()},l=>{console.log(l),n.presentToast("error",n._translateService.instant("common.errors-message.common-server-error"))})})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(O),t.Y36(a.qu),t.Y36(p.gz),t.Y36(P.Dx),t.Y36(p.F0),t.Y36(q.uw),t.Y36(M.v),t.Y36(L.w),t.Y36(U._W),t.Y36(Z.sK),t.Y36(f.xA))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-loyalty-rule"]],features:[t.qOj],decls:27,vars:10,consts:[[1,"form"],[1,"div-contain"],[1,"div-contain-p","row"],["class","mt-3",4,"ngFor","ngForOf"],[1,"mt-3"],[4,"ngIf"],[1,"div-contain-profile-rank","row"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","text","class","form-control","readonly","","placeholder","0",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","class","form-control","placeholder","0",3,"ngModel","ngModelChange",4,"ngIf"],["rows","5","cols","5","pInputTextarea","",1,"form-control","textarea",3,"ngModel","autoResize","ngModelChange"],["pButton","","type","button","label","L\u01b0u",3,"click"],["type","text","readonly","","placeholder","0",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","0",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(t.TgZ(0,"app-main-layout"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"h5"),t._uU(4),t.qZA(),t._UZ(5,"hr"),t.TgZ(6,"div",2),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.qZA(),t.qZA(),t.YNc(13,Gt,2,1,"div",3),t.qZA(),t.qZA(),t.TgZ(14,"div",0),t.TgZ(15,"div",1),t.TgZ(16,"h5"),t._uU(17),t.qZA(),t._UZ(18,"hr"),t.TgZ(19,"div",2),t.TgZ(20,"p"),t._uU(21),t.qZA(),t.TgZ(22,"p"),t._uU(23),t.qZA(),t.TgZ(24,"p"),t._uU(25),t.qZA(),t.qZA(),t.YNc(26,Nt,2,1,"div",3),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",n._translateService.instant("pages.loyalty.pages.rule.retailer")," "),t.xp6(4),t.hij(" ",n._translateService.instant("pages.loyalty.pages.rule.member-rank")," "),t.xp6(2),t.hij(" ",n._translateService.instant("pages.loyalty.pages.rule.point-up-rank")," "),t.xp6(2),t.hij(" ",n._translateService.instant("pages.loyalty.pages.rule.description")," "),t.xp6(1),t.Q6J("ngForOf",n.membershipList),t.xp6(4),t.hij(" ",n._translateService.instant("pages.loyalty.pages.rule.installer")," "),t.xp6(4),t.hij(" ",n._translateService.instant("pages.loyalty.pages.rule.member-rank")," "),t.xp6(2),t.hij(" ",n._translateService.instant("pages.loyalty.pages.rule.point-up-rank")," "),t.xp6(2),t.hij(" ",n._translateService.instant("pages.loyalty.pages.rule.description")," "),t.xp6(1),t.Q6J("ngForOf",n.membershipList))},directives:[F.f,C.sg,C.O5,a.Fj,a.JJ,a.On,Y.g,b.Hq],styles:[".form[_ngcontent-%COMP%]{width:100%;background-color:#fff;border:1px solid lightgrey;border-radius:20px;margin-top:2rem}.form[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:1rem 0 0 1rem}.form[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{justify-content:center;padding:0 1rem 0 2rem}.form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #a6d5fa;border-color:#2196f3}.div-contain[_ngcontent-%COMP%]{padding-bottom:5%;border-radius:20px}.mt-3[_ngcontent-%COMP%]:not(:first-child){margin-top:2%!important}.div-contain-profile-rank[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:5%}.div-contain-profile-rank[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:24%;height:5%;padding:16px;margin-left:2%;border-radius:3px}.div-contain-profile-rank[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:2%;width:12%;height:51px}.div-contain-profile-rank[_ngcontent-%COMP%]   .textarea[_ngcontent-%COMP%]{margin-left:2%;width:24%;border-radius:3px}.div-contain-p[_ngcontent-%COMP%]{width:80%;margin-left:5%;margin-top:40px}.div-contain-p[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin-left:5%;width:25%}"]}),o})();var Jt=c(8022),X=c(6711);function Qt(o,s){if(1&o&&(t.TgZ(0,"h5"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e._translateService.instant("pages.qrcode.labels.result-list")," ")}}function jt(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"th",8),t._uU(2),t.qZA(),t.TgZ(3,"th",9),t._uU(4),t.qZA(),t.TgZ(5,"th",10),t._uU(6),t.qZA(),t.TgZ(7,"th",11),t._uU(8),t.qZA(),t.TgZ(9,"th",12),t._uU(10),t.qZA(),t.TgZ(11,"th",13),t._uU(12),t.qZA(),t.TgZ(13,"th",14),t._uU(14),t.qZA(),t.TgZ(15,"th",15),t._uU(16),t.qZA(),t.TgZ(17,"th",16),t._uU(18),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",e._translateService.instant("pages.qrcode.labels.qrcode")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.qrcode.labels.qrcode")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.qrcode.labels.qr-date-of-create")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.qrcode.labels.qr-type")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.qrcode.advance-search.product")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.qrcode.labels.total-score")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.qrcode.labels.customer-code")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.qrcode.labels.customer-name")," "),t.xp6(2),t.hij(" ",e._translateService.instant("pages.qrcode.labels.qr-date-of-use")," ")}}function Rt(o,s){if(1&o&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);let i;t.xp6(1),t.hij(" ",null==(i=n.findProduct(e.productId,n.productList))?null:i.productName," ")}}function kt(o,s){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",8),t._UZ(2,"img",17),t.qZA(),t.TgZ(3,"td",9),t._uU(4),t.qZA(),t.TgZ(5,"td",10),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td",11),t._uU(9),t.qZA(),t.YNc(10,Rt,2,1,"td",18),t.TgZ(11,"td",13),t._uU(12),t.qZA(),t.TgZ(13,"td",14),t._uU(14),t.qZA(),t.TgZ(15,"td",15),t._uU(16),t.qZA(),t.TgZ(17,"td",16),t._uU(18),t.ALo(19,"date"),t.qZA(),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(2);t.xp6(2),t.s9C("src",e.qrUrl,t.LSH),t.xp6(2),t.Oqu(e.qrCode),t.xp6(2),t.hij(" ",t.xi3(7,9,e.createdDate,"dd/MM/yyy")," "),t.xp6(3),t.Oqu(e.qrType),t.xp6(1),t.Q6J("ngIf",n.productList),t.xp6(2),t.Oqu(e.qrPoint),t.xp6(2),t.Oqu(e.customerNo),t.xp6(2),t.Oqu(e.customerName),t.xp6(2),t.hij(" ",t.xi3(19,12,e.qrUsedDate,"dd/MM/yyy")," ")}}const Ht=function(){return[5,10,15]};function Bt(o,s){if(1&o&&(t.TgZ(0,"div",3),t.TgZ(1,"p-table",4),t.YNc(2,Qt,2,1,"ng-template",5),t.YNc(3,jt,19,9,"ng-template",6),t.YNc(4,kt,20,15,"ng-template",7),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("value",e.qrHistoryList)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(5,Ht))}}function zt(o,s){1&o&&(t.TgZ(0,"div",19),t.TgZ(1,"h1"),t._uU(2,"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"),t.qZA(),t.qZA())}let tt=(()=>{class o extends A.H{constructor(e,n,i,r,l,d,g,m,u,h,_,v,S){var w;super(e,n,i,r,l,d,g,m,u),this.campaignService=h,this.qrcodeService=_,this.loyaltyService=v,this._confirmationService=S,this.currentPage={first:0,rows:10,page:0,pageCount:10},this.state={},this.state=null===(w=this._router.getCurrentNavigation())||void 0===w?void 0:w.extras.state,this._pageTitle.setTitle(this._translateService.instant("pages.qrcode.labels.page-title"))}ngOnInit(){console.log(this.state),this.initializePage()}initializePage(){this.getPackingList()}getPackingList(){var e=this;return(0,E.Z)(function*(){e._common.attachSpinner(),(0,I.D)({response:e.loyaltyService.getQrHistoryList({page:1,itemPerPage:"1000",productId:0}),productList:e.qrcodeService.getProductList()}).pipe((0,G.g)(e.loadingTime)).subscribe(n=>{200===n.response.responseStatus?(e.qrHistoryList=n.response.content.datas.datasList,e.productList=n.productList.content.datas.producstList,e.qrHistoryList.length<1?e.presentToast("success",e._translateService.instant(n.response.content.message)):e.presentToast("warning",e._translateService.instant("common.errors-message.get-data-fail"))):e.presentToast(417===n.response.responseStatus?"warning":"error",e._translateService.instant(n.response.content.message)),e._common.detachSpinner()},n=>{console.log(n),e.presentToast("error",e._translateService.instant("common.errors-message.common-server-error"))})})()}findProduct(e,n){return n.find(i=>i.productId===e)}receiveSearch(e){this.qrHistoryList=e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.gz),t.Y36(P.Dx),t.Y36(p.F0),t.Y36(q.uw),t.Y36(M.v),t.Y36(L.w),t.Y36(U._W),t.Y36(Z.sK),t.Y36(f.xA),t.Y36(Jt.U),t.Y36(X.D),t.Y36(O),t.Y36(x.YP))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-qrcode-history-list"]],features:[t.qOj],decls:5,vars:2,consts:[[3,"searchEvent"],["class","app-table",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"app-table"],["styleClass","p-datatable-sm p-datatable-gridlines","responsiveLayout","scroll","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","scrollHeight","200px",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"column-1"],[1,"column-2"],[1,"column-3"],[1,"column-4"],[1,"column-5"],[1,"column-6"],[1,"column-7"],[1,"column-8"],[1,"column-9"],["alt","qrcode",1,"qrcode",3,"src"],["class","column-5",4,"ngIf"],[1,"error"]],template:function(e,n){if(1&e&&(t.TgZ(0,"app-main-layout"),t.TgZ(1,"app-advance-search-history-list-qrcode",0),t.NdJ("searchEvent",function(r){return n.receiveSearch(r)}),t.qZA(),t.YNc(2,Bt,5,6,"div",1),t.YNc(3,zt,3,0,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(4);t.xp6(2),t.Q6J("ngIf",n.qrHistoryList.length>0)("ngIfElse",i)}},styles:[".app-table[_ngcontent-%COMP%]{width:100%;height:auto;box-shadow:#959da533 0 8px 24px!important;background-color:#fff!important;margin-top:2rem;padding:5px}.app-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .app-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{justify-content:center}.app-table[_ngcontent-%COMP%]   .column-1[_ngcontent-%COMP%]{min-width:100px}.app-table[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]{min-width:150px}.app-table[_ngcontent-%COMP%]   .column-3[_ngcontent-%COMP%]{min-width:170px}.app-table[_ngcontent-%COMP%]   .column-4[_ngcontent-%COMP%]{min-width:70px}.app-table[_ngcontent-%COMP%]   .column-5[_ngcontent-%COMP%]{min-width:170px}.app-table[_ngcontent-%COMP%]   .column-6[_ngcontent-%COMP%]{min-width:150px}.app-table[_ngcontent-%COMP%]   .column-7[_ngcontent-%COMP%]{min-width:180px}.app-table[_ngcontent-%COMP%]   .column-8[_ngcontent-%COMP%]{min-width:180}.app-table[_ngcontent-%COMP%]   .column-9[_ngcontent-%COMP%]{min-width:190px}.qrcode[_ngcontent-%COMP%]{width:50%;display:block;margin-left:auto;margin-right:auto}.error[_ngcontent-%COMP%]{color:red;justify-content:center;display:block;text-align:center}.form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #a6d5fa;border-color:#2196f3}"]}),o})();const $t=[{path:"loyalty-rule",component:It,data:{listLabel:"Quy Lu\u1eadt"}},{path:"loyalty-gift-list",component:Ut,data:{listLabel:"Danh S\xe1ch Qu\xe0 T\u1eb7ng"}},{path:"loyalty-gift-exchange-manager",component:pt,data:{listLabel:"Qu\u1ea3n L\xfd \u0110\u1ed5i Qu\xe0"}},{path:"qrcode-history-list",component:tt,data:{listLabel:"Danh S\xe1ch M\xe3 Qr \u0110\xe3 S\u1eed D\u1ee5ng"}}];let Vt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.Bz.forChild($t)],p.Bz]}),o})();var Kt=c(8295),Wt=c(9983),Xt=c(5939),te=c(6352),ee=c(14),ne=c(7745),oe=c(4020),ie=c(3928),re=c(8598),ae=c(3422),se=c(9394),le=c(103),ce=c(7258);let pe=(()=>{class o extends A.H{constructor(e,n,i,r,l,d,g,m,u,h,_,v,S,w,j,ge){super(n,i,r,l,d,g,m,u,h),this.fb=e,this.primeConfig=_,this.qrcodeService=v,this.loyaltyService=S,this._confirmationService=w,this._ref=j,this.formBuilder=ge,this.isQRsHistoryList=!0,this.searchEvent=new t.vpe}ngOnInit(){this._translateService.get("primeng").subscribe(e=>this.primeConfig.setTranslation(e)),this.qrcodeForm=this.formBuilder.group({txtCustomerNo:["",{validators:[],asyncValidators:[],updateOn:"change"}],txtQrUsedDate:["",{validators:[a.kI.maxLength(50)],asyncValidators:[],updateOn:"change"}],txtQrCode:["",{validators:[a.kI.maxLength(50)],asyncValidators:[],updateOn:"change"}]}),this.initializePage()}initializePage(){this.getPackingList()}getPackingList(){var e=this;return(0,E.Z)(function*(){(0,I.D)({productList:e.qrcodeService.getProductList()}).pipe((0,G.g)(e.loadingTime)).subscribe(n=>{200===n.productList.responseStatus?(e.productList=n.productList.content.datas.producstList,e.presentToast("success",e._translateService.instant(n.productList.content.message))):e.presentToast(417===n.productList.responseStatus?"warning":"error",e._translateService.instant(n.productList.content.message))},n=>{console.log(n),e.presentToast("error",e._translateService.instant("common.errors-message.common-server-error"))})})()}findPacking(){var e,n;const i={page:this.currentPages,itemPerPage:this.itemPage,customerNo:this.qrcodeForm.value.txtCustomerNo,productId:this.currentProductId,groupId:this.currentGroupId,qrUsedDate:this.qrcodeForm.value.txtQrUsedDate,qrCode:this.qrcodeForm.value.txtQrCode};console.log("new packing: ",i),this.isQRsHistoryList?null===(e=this.loyaltyService.advancedSearchQrHistory(i))||void 0===e||e.subscribe(r=>{200===r.responseStatus?(this.presentToast("success",this._translateService.instant(r.content.message)),this.searchEvent.emit(r.content.datas.datasList),console.log(r.content.datas.datasList),this._ref.close()):417===r.responseStatus?this.presentToast("warning",this._translateService.instant(r.content.message)):(console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")))},r=>{console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))}):null===(n=this.loyaltyService.advancedSearchQrHistory(i))||void 0===n||n.subscribe(r=>{200===r.responseStatus?(this.presentToast("success",this._translateService.instant(r.content.message)),this.searchEvent.emit(r.content.datas.datasList),this._ref.close()):417===r.responseStatus?this.presentToast("warning",this._translateService.instant(r.content.message)):(console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error")))},r=>{console.log(r),this.presentToast("error",this._translateService.instant("common.errors-message.common-server-error"))})}getGroups(e){this.currentGroupId=e}getGroup(e){console.log(e),this.currentGroup=e}getProductId(e){this.currentProductId=e.value,console.log(this.currentProductId)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(p.gz),t.Y36(P.Dx),t.Y36(p.F0),t.Y36(q.uw),t.Y36(M.v),t.Y36(L.w),t.Y36(U._W),t.Y36(Z.sK),t.Y36(f.xA),t.Y36(x.b4),t.Y36(X.D),t.Y36(O),t.Y36(x.YP),t.Y36(f.E7),t.Y36(a.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-advance-search-history-list-qrcode"]],inputs:{isQRsHistoryList:"isQRsHistoryList"},outputs:{searchEvent:"searchEvent"},features:[t.qOj],decls:33,vars:8,consts:[["action","",1,"form",3,"formGroup"],[1,"row","input-field"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","qrcodePackingNumber",1,"form-control-label"],["type","text","id","qrcodePackingNumber","formControlName","txtCustomerNo",1,"form-control"],["for","qrcodeProduct",1,"form-control-label"],["optionLabel","productName","optionValue","productId",1,"common-dropdown","p-inputtext-sm",3,"options","placeholder","onChange"],[3,"currentGroup","currentGroups"],["for","qrcodeDateUsed",1,"form-control-label"],["type","date","id","qrcodeProduct","formControlName","txtQrUsedDate","dateFormat","dd/MM/yyyy",1,"form-control"],["type","text","id","qrcodePackingNumber","formControlName","txtQrCode",1,"form-control"],[1,"col-md-12","flex","btn-search"],["pButton","","type","button","label","T\xecm Ki\u1ebfm",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"h5"),t._uU(2),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",1),t.TgZ(5,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"label",5),t._uU(9),t.qZA(),t._UZ(10,"input",6),t.qZA(),t.qZA(),t.TgZ(11,"div",3),t.TgZ(12,"div",4),t.TgZ(13,"label",7),t._uU(14),t.qZA(),t.TgZ(15,"p-dropdown",8),t.NdJ("onChange",function(r){return n.getProductId(r)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",2),t.TgZ(17,"div",3),t.TgZ(18,"div",4),t.TgZ(19,"app-common-group",9),t.NdJ("currentGroup",function(r){return n.getGroup(r)})("currentGroups",function(r){return n.getGroups(r)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",3),t.TgZ(21,"div",4),t.TgZ(22,"label",10),t._uU(23),t.qZA(),t._UZ(24,"input",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",2),t.TgZ(26,"div",3),t.TgZ(27,"div",4),t.TgZ(28,"label",5),t._uU(29),t.qZA(),t._UZ(30,"input",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",13),t.TgZ(32,"button",14),t.NdJ("click",function(){return n.findPacking()}),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.qrcodeForm),t.xp6(2),t.hij(" ",n._translateService.instant("pages.qrcode.advance-search.advance-search")," "),t.xp6(7),t.hij("",n._translateService.instant("pages.qrcode.advance-search.customer-code"),": "),t.xp6(5),t.hij("",n._translateService.instant("pages.qrcode.advance-search.product"),":"),t.xp6(1),t.Q6J("options",n.productList)("placeholder",n._translateService.instant("pages.qrcode.placeholders.choose-product")),t.xp6(8),t.hij("",n._translateService.instant("pages.qrcode.advance-search.date-of-use"),":"),t.xp6(6),t.hij("",n._translateService.instant("pages.qrcode.labels.qrcode"),": "))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,le.Lt,ce.Z,b.Hq],styles:[".form[_ngcontent-%COMP%]{width:100%;height:auto;background-color:#fff;border:1px solid lightgrey;border-radius:20px;margin-top:2rem}.form[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:1rem 0 0 1rem}.form[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{justify-content:center;padding:0 2rem}.form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #a6d5fa;border-color:#2196f3}.flex[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]     .p-button-text{width:120px;background-color:#008cff;color:#fff;border-color:#0000;text-align:center}.btn-search[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;margin-bottom:1rem}  .p-dropdown{border-radius:8px;width:100%}"]}),o})(),de=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[C.ez,Vt,se.Y,Kt.lN,Wt.c,Xt.Nh,te.zz,ee.L,ne.d,oe.Q,ie.j,b.hJ,re._8,ae.TX,Q.O]]}),o})();t.B6R(tt,[F.f,pe,C.O5,J.iA,x.jx],[C.uU])}}]);